{"remainingRequest":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\babel-loader\\lib\\index.js!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\src\\views\\article\\Article.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\src\\views\\article\\Article.vue","mtime":1724562434884},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\babel.config.js","mtime":1659112848000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAqIGFzIGltYWdlQ29udmVyc2lvbiBmcm9tICJpbWFnZS1jb252ZXJzaW9uIjsKZXhwb3J0IGRlZmF1bHQgewogIGNyZWF0ZWQoKSB7CiAgICBjb25zdCBwYXRoID0gdGhpcy4kcm91dGUucGF0aDsKICAgIGNvbnN0IGFyciA9IHBhdGguc3BsaXQoIi8iKTsKICAgIGNvbnN0IGFydGljbGVJZCA9IGFyclsyXTsKICAgIGlmIChhcnRpY2xlSWQpIHsKICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgICAgdGhpcy5heGlvcy5nZXQoIi9hcGkvYWRtaW4vYXJ0aWNsZXMvIiArIGFydGljbGVJZCwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAKICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHsKICAgICAgICBkYXRhCiAgICAgIH0pID0+IHsKICAgICAgICB0aGlzLmFydGljbGUgPSBkYXRhLmRhdGE7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgYXJ0aWNsZSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oImFydGljbGUiKTsKICAgICAgaWYgKGFydGljbGUpIHsKICAgICAgICB0aGlzLmFydGljbGUgPSBKU09OLnBhcnNlKGFydGljbGUpOwogICAgICB9CiAgICB9CiAgfSwKICBkZXN0cm95ZWQoKSB7CiAgICAvL+aWh+eroOiHquWKqOS/neWtmOWKn+iDvQogICAgdGhpcy5hdXRvU2F2ZUFydGljbGUoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGFkZE9yRWRpdDogZmFsc2UsCiAgICAgIGF1dG9TYXZlOiB0cnVlLAogICAgICBjYXRlZ29yeU5hbWU6ICIiLAogICAgICB0YWdOYW1lOiAiIiwKICAgICAgY2F0ZWdvcnlMaXN0OiBbXSwKICAgICAgdGFnTGlzdDogW10sCiAgICAgIHR5cGVMaXN0OiBbewogICAgICAgIHR5cGU6IDEsCiAgICAgICAgZGVzYzogIuWOn+WImyIKICAgICAgfSwgewogICAgICAgIHR5cGU6IDIsCiAgICAgICAgZGVzYzogIui9rOi9vSIKICAgICAgfSwgewogICAgICAgIHR5cGU6IDMsCiAgICAgICAgZGVzYzogIue/u+ivkSIKICAgICAgfV0sCiAgICAgIGFydGljbGU6IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBhcnRpY2xlVGl0bGU6IHRoaXMuJG1vbWVudChuZXcgRGF0ZSgpKS5mb3JtYXQoIllZWVktTU0tREQiKSwKICAgICAgICBhcnRpY2xlQ29udGVudDogIiIsCiAgICAgICAgYXJ0aWNsZUNvdmVyOiAiIiwKICAgICAgICBjYXRlZ29yeU5hbWU6IG51bGwsCiAgICAgICAgdGFnTmFtZUxpc3Q6IFtdLAogICAgICAgIG9yaWdpbmFsVXJsOiAiIiwKICAgICAgICBpc1RvcDogMCwKICAgICAgICB0eXBlOiAxLAogICAgICAgIHN0YXR1czogMQogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgbGlzdENhdGVnb3JpZXMoKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvYXBpL2FkbWluL2NhdGVnb3JpZXMvc2VhcmNoIiwge30pLnRoZW4oKHsKICAgICAgICBkYXRhCiAgICAgIH0pID0+IHsKICAgICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IGRhdGEuZGF0YS5yZWNvcmRMaXN0OwogICAgICAgIGNvbnNvbGUubG9nKCJMb2FkZWQgY2F0ZWdvcmllczoiLCB0aGlzLmNhdGVnb3J5TGlzdCk7IC8vIOajgOafpeiOt+WPluWIsOeahOWIhuexu+aVsOaNrgogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3IgbG9hZGluZyBjYXRlZ29yaWVzOiIsIGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgbGlzdFRhZ3MoKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvYXBpL2FkbWluL3RhZ3Mvc2VhcmNoIiwge30pLnRoZW4oKHsKICAgICAgICBkYXRhCiAgICAgIH0pID0+IHsKICAgICAgICB0aGlzLnRhZ0xpc3QgPSBkYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIG9wZW5Nb2RlbCgpIHsKICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5hcnRpY2xlVGl0bGUudHJpbSgpID09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5qCH6aKY5LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFydGljbGUuYXJ0aWNsZUNvbnRlbnQudHJpbSgpID09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5YaF5a655LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHRoaXMubGlzdENhdGVnb3JpZXMoKTsKICAgICAgdGhpcy5saXN0VGFncygpOwogICAgICB0aGlzLmFkZE9yRWRpdCA9IHRydWU7CiAgICB9LAogICAgdXBsb2FkQ292ZXIocmVzcG9uc2UpIHsKICAgICAgY29uc29sZS5sb2coIlVwbG9hZCByZXNwb25zZToiLCByZXNwb25zZSk7CiAgICAgIHRoaXMuYXJ0aWNsZS5hcnRpY2xlQ292ZXIgPSByZXNwb25zZS5kYXRhOwogICAgfSwKICAgIGJlZm9yZVVwbG9hZChmaWxlKSB7CiAgICAgIGNvbnNvbGUubG9nKCJSZWNlaXZlZCBmaWxlIGZvciB1cGxvYWQ6IiwgZmlsZSk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgICBpZiAoZmlsZS5zaXplIC8gMTAyNCA8IHRoaXMuY29uZmlnLlVQTE9BRF9TSVpFKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRmlsZSBzaXplIGlzIHdpdGhpbiBsaW1pdCwgcHJvY2VlZGluZyB3aXRoIHVwbG9hZC4iKTsKICAgICAgICAgIHJlc29sdmUoZmlsZSk7IC8vIOebtOaOpeS4iuS8oOaWh+S7tgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiRmlsZSBzaXplIGV4Y2VlZHMgbGltaXQsIGNvbXByZXNzaW5nLi4uIik7CiAgICAgICAgICBpbWFnZUNvbnZlcnNpb24uY29tcHJlc3NBY2N1cmF0ZWx5KGZpbGUsIHRoaXMuY29uZmlnLlVQTE9BRF9TSVpFKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGaWxlIGNvbXByZXNzaW9uIHN1Y2Nlc3NmdWw6IiwgcmVzKTsKICAgICAgICAgICAgLy8g56Gu5L+d5Y6L57yp5ZCO55qE5paH5Lu25a+56LGh6KKr5Lyg6YCS5YiwIHJlc29sdmUg5Zue6LCD5LitCiAgICAgICAgICAgIHJlc29sdmUobmV3IHdpbmRvdy5GaWxlKFtyZXNdLCBmaWxlLm5hbWUsIHsKICAgICAgICAgICAgICB0eXBlOiBmaWxlLnR5cGUKICAgICAgICAgICAgfSkpOwogICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBkdXJpbmcgZmlsZSBjb21wcmVzc2lvbjoiLCBlcnJvcik7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHVwbG9hZEltZyhwb3MsIGZpbGUpIHsKICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGlmIChmaWxlLnNpemUgLyAxMDI0IDwgdGhpcy5jb25maWcuVVBMT0FEX1NJWkUpIHsKICAgICAgICBmb3JtZGF0YS5hcHBlbmQoImZpbGUiLCBmaWxlKTsKICAgICAgICB0aGlzLmF4aW9zLnBvc3QoIi9hcGkvYWRtaW4vYXJ0aWNsZXMvaW1hZ2VzIiwgZm9ybWRhdGEpLnRoZW4oKHsKICAgICAgICAgIGRhdGEKICAgICAgICB9KSA9PiB7CiAgICAgICAgICBjb25zdCBpbWdVcmxXaXRoVGltZXN0YW1wID0gYCR7ZGF0YS5kYXRhfT90PSR7bmV3IERhdGUoKS5nZXRUaW1lKCl9YDsKICAgICAgICAgIGNvbnNvbGUubG9nKCJVUkwgdG8gaW5zZXJ0OiIsIGltZ1VybFdpdGhUaW1lc3RhbXApOwogICAgICAgICAgdGhpcy4kcmVmcy5tZC4kaW1nMlVybChwb3MsIGltZ1VybFdpdGhUaW1lc3RhbXApOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGltYWdlQ29udmVyc2lvbi5jb21wcmVzc0FjY3VyYXRlbHkoZmlsZSwgdGhpcy5jb25maWcuVVBMT0FEX1NJWkUpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGZvcm1kYXRhLmFwcGVuZCgiZmlsZSIsIG5ldyB3aW5kb3cuRmlsZShbcmVzXSwgZmlsZS5uYW1lLCB7CiAgICAgICAgICAgIHR5cGU6IGZpbGUudHlwZQogICAgICAgICAgfSkpOwogICAgICAgICAgdGhpcy5heGlvcy5wb3N0KCIvYXBpL2FkbWluL2FydGljbGVzL2ltYWdlcyIsIGZvcm1kYXRhLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLnRoZW4oKHsKICAgICAgICAgICAgZGF0YQogICAgICAgICAgfSkgPT4gewogICAgICAgICAgICBjb25zdCBpbWdVcmxXaXRoVGltZXN0YW1wID0gYCR7ZGF0YS5kYXRhfT90PSR7bmV3IERhdGUoKS5nZXRUaW1lKCl9YDsKICAgICAgICAgICAgY29uc29sZS5sb2coIlVSTCB0byBpbnNlcnQ6IiwgaW1nVXJsV2l0aFRpbWVzdGFtcCk7CiAgICAgICAgICAgIHRoaXMuJHJlZnMubWQuJGltZzJVcmwocG9zLCBpbWdVcmxXaXRoVGltZXN0YW1wKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgc2F2ZUFydGljbGVEcmFmdCgpIHsKICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5hcnRpY2xlVGl0bGUudHJpbSgpID09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5qCH6aKY5LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFydGljbGUuYXJ0aWNsZUNvbnRlbnQudHJpbSgpID09ICIiKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5YaF5a655LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHRoaXMuYXJ0aWNsZS5zdGF0dXMgPSAzOwogICAgICBjb25zdCB0b2tlbiA9IHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICB0aGlzLmF4aW9zLnBvc3QoIi9hcGkvYWRtaW4vYXJ0aWNsZXMiLCB0aGlzLmFydGljbGUsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0b2tlbn1gCiAgICAgICAgfQogICAgICB9KS50aGVuKCh7CiAgICAgICAgZGF0YQogICAgICB9KSA9PiB7CiAgICAgICAgaWYgKGRhdGEuZmxhZykgewogICAgICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5pZCA9PT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInJlbW92ZVRhYiIsICLlj5HluIPmlofnq6AiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgicmVtb3ZlVGFiIiwgIuS/ruaUueaWh+eroCIpOwogICAgICAgICAgfQogICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgiYXJ0aWNsZSIpOwogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhdGggIT09ICcvYXJ0aWNsZS1saXN0JykgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgcGF0aDogIi9hcnRpY2xlLWxpc3QiCiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgaWYgKGVyci5uYW1lICE9PSAnTmF2aWdhdGlvbkR1cGxpY2F0ZWQnKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICLmiJDlip8iLAogICAgICAgICAgICBtZXNzYWdlOiAi5L+d5a2Y6I2J56i/5oiQ5YqfIgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5lcnJvcih7CiAgICAgICAgICAgIHRpdGxlOiAi5aSx6LSlIiwKICAgICAgICAgICAgbWVzc2FnZTogIuS/neWtmOiNieeov+Wksei0pSIKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIGlmIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogIuivt+axguWksei0pSIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuYXV0b1NhdmUgPSBmYWxzZTsKICAgIH0sCiAgICBzYXZlT3JVcGRhdGVBcnRpY2xlKCkgewogICAgICBpZiAodGhpcy5hcnRpY2xlLmFydGljbGVUaXRsZS50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofnq6DmoIfpopjkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5hcnRpY2xlQ29udGVudC50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmlofnq6DlhoXlrrnkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5jYXRlZ29yeU5hbWUgPT0gbnVsbCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWh+eroOWIhuexu+S4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5hcnRpY2xlLnRhZ05hbWVMaXN0Lmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5paH56ug5qCH562+5LiN6IO95Li656m6Iik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmFydGljbGUuYXJ0aWNsZUNvdmVyLnRyaW0oKSA9PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWh+eroOWwgemdouS4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICAvLyDliY3nq6/ljrvph43lpITnkIbvvIjlpoLmnpzpnIDopoHvvIkKICAgICAgdGhpcy5hcnRpY2xlLnRhZ05hbWVMaXN0ID0gWy4uLm5ldyBTZXQodGhpcy5hcnRpY2xlLnRhZ05hbWVMaXN0KV07CiAgICAgIGNvbnN0IHRva2VuID0gdGhpcy4kc3RvcmUuc3RhdGUudG9rZW4gfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgICAgIHRoaXMuYXhpb3MucG9zdCgiL2FwaS9hZG1pbi9hcnRpY2xlcyIsIHRoaXMuYXJ0aWNsZSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAKICAgICAgICB9CiAgICAgIH0pLnRoZW4oKHsKICAgICAgICBkYXRhCiAgICAgIH0pID0+IHsKICAgICAgICBjb25zb2xlLmxvZygiUmVzcG9uc2UgZGF0YToiLCBkYXRhKTsgLy8g5omT5Y2w5o6l5pS25Yiw55qE5pWw5o2uCiAgICAgICAgaWYgKGRhdGEuZmxhZykgewogICAgICAgICAgY29uc29sZS5sb2coIlN1Ym1pdHRpbmcgYXJ0aWNsZSB3aXRoIGNhdGVnb3J5OiIsIHRoaXMuYXJ0aWNsZS5jYXRlZ29yeU5hbWUpOwogICAgICAgICAgaWYgKHRoaXMuYXJ0aWNsZS5pZCA9PT0gbnVsbCkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInJlbW92ZVRhYiIsICLlj5HluIPmlofnq6AiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgicmVtb3ZlVGFiIiwgIuS/ruaUueaWh+eroCIpOwogICAgICAgICAgfQogICAgICAgICAgc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbSgiYXJ0aWNsZSIpOwogICAgICAgICAgaWYgKHRoaXMuJHJvdXRlLnBhdGggIT09ICcvYXJ0aWNsZS1saXN0JykgewogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgcGF0aDogIi9hcnRpY2xlLWxpc3QiCiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgaWYgKGVyci5uYW1lICE9PSAnTmF2aWdhdGlvbkR1cGxpY2F0ZWQnKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBlcnI7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICLmiJDlip8iLAogICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogIuWksei0pSIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIHRoaXMuYWRkT3JFZGl0ID0gZmFsc2U7CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgdGl0bGU6ICLor7fmsYLlpLHotKUiLAogICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmF1dG9TYXZlID0gZmFsc2U7CiAgICB9LAogICAgYXV0b1NhdmVBcnRpY2xlKCkgewogICAgICBpZiAodGhpcy5hdXRvU2F2ZSAmJiB0aGlzLmFydGljbGUuYXJ0aWNsZVRpdGxlLnRyaW0oKSAhPSAiIiAmJiB0aGlzLmFydGljbGUuYXJ0aWNsZUNvbnRlbnQudHJpbSgpICE9ICIiICYmIHRoaXMuYXJ0aWNsZS5pZCAhPSBudWxsKSB7CiAgICAgICAgY29uc3QgdG9rZW4gPSB0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgICAgICB0aGlzLmF4aW9zLnBvc3QoIi9hcGkvYWRtaW4vYXJ0aWNsZXMiLCB0aGlzLmFydGljbGUsIHsKICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dG9rZW59YAogICAgICAgICAgfQogICAgICAgIH0pLnRoZW4oKHsKICAgICAgICAgIGRhdGEKICAgICAgICB9KSA9PiB7CiAgICAgICAgICBpZiAoZGF0YS5mbGFnKSB7CiAgICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgICB0aXRsZTogIuaIkOWKnyIsCiAgICAgICAgICAgICAgbWVzc2FnZTogIuiHquWKqOS/neWtmOaIkOWKnyIKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICAgIHRpdGxlOiAi5aSx6LSlIiwKICAgICAgICAgICAgICBtZXNzYWdlOiAi6Ieq5Yqo5L+d5a2Y5aSx6LSlIgogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICBpZiAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kbm90aWZ5LmVycm9yKHsKICAgICAgICAgICAgICB0aXRsZTogIuivt+axguWksei0pSIsCiAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAodGhpcy5hdXRvU2F2ZSAmJiB0aGlzLmFydGljbGUuaWQgPT0gbnVsbCkgewogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImFydGljbGUiLCBKU09OLnN0cmluZ2lmeSh0aGlzLmFydGljbGUpKTsKICAgICAgfQogICAgfSwKICAgIHNlYXJjaENhdGVnb3JpZXMoa2V5d29yZHMsIGNiKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvYXBpL2FkbWluL2NhdGVnb3JpZXMvc2VhcmNoIiwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAga2V5d29yZHM6IGtleXdvcmRzCiAgICAgICAgfQogICAgICB9KS50aGVuKCh7CiAgICAgICAgZGF0YQogICAgICB9KSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coIkZldGNoZWQgY2F0ZWdvcmllczoiLCBkYXRhLmRhdGEpOyAvLyDml6Xlv5fovpPlh7rov5Tlm57nmoTmlbDmja4KICAgICAgICBjYihkYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVTZWxlY3RDYXRlZ29yaWVzKGl0ZW0pIHsKICAgICAgdGhpcy5hZGRDYXRlZ29yeSh7CiAgICAgICAgY2F0ZWdvcnlOYW1lOiBpdGVtLmNhdGVnb3J5TmFtZQogICAgICB9KTsKICAgIH0sCiAgICBzYXZlQ2F0ZWdvcnkoKSB7CiAgICAgIGlmICh0aGlzLmNhdGVnb3J5TmFtZS50cmltKCkgIT0gIiIpIHsKICAgICAgICB0aGlzLmFkZENhdGVnb3J5KHsKICAgICAgICAgIGNhdGVnb3J5TmFtZTogdGhpcy5jYXRlZ29yeU5hbWUKICAgICAgICB9KTsKICAgICAgICB0aGlzLmNhdGVnb3J5TmFtZSA9ICIiOwogICAgICB9CiAgICB9LAogICAgYWRkQ2F0ZWdvcnkoaXRlbSkgewogICAgICB0aGlzLmFydGljbGUuY2F0ZWdvcnlOYW1lID0gaXRlbS5jYXRlZ29yeU5hbWU7CiAgICB9LAogICAgcmVtb3ZlQ2F0ZWdvcnkoKSB7CiAgICAgIHRoaXMuYXJ0aWNsZS5jYXRlZ29yeU5hbWUgPSBudWxsOwogICAgfSwKICAgIHNlYXJjaFRhZ3Moa2V5d29yZHMsIGNiKSB7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvYXBpL2FkbWluL3RhZ3Mvc2VhcmNoIiwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAga2V5d29yZHM6IGtleXdvcmRzCiAgICAgICAgfQogICAgICB9KS50aGVuKCh7CiAgICAgICAgZGF0YQogICAgICB9KSA9PiB7CiAgICAgICAgY2IoZGF0YS5kYXRhKTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlU2VsZWN0VGFnKGl0ZW0pIHsKICAgICAgdGhpcy5hZGRUYWcoewogICAgICAgIHRhZ05hbWU6IGl0ZW0udGFnTmFtZQogICAgICB9KTsKICAgIH0sCiAgICBzYXZlVGFnKCkgewogICAgICBpZiAodGhpcy50YWdOYW1lLnRyaW0oKSAhPSAiIikgewogICAgICAgIHRoaXMuYWRkVGFnKHsKICAgICAgICAgIHRhZ05hbWU6IHRoaXMudGFnTmFtZQogICAgICAgIH0pOwogICAgICAgIHRoaXMudGFnTmFtZSA9ICIiOwogICAgICB9CiAgICB9LAogICAgYWRkVGFnKGl0ZW0pIHsKICAgICAgaWYgKHRoaXMuYXJ0aWNsZS50YWdOYW1lTGlzdC5pbmRleE9mKGl0ZW0udGFnTmFtZSkgPT0gLTEpIHsKICAgICAgICB0aGlzLmFydGljbGUudGFnTmFtZUxpc3QucHVzaChpdGVtLnRhZ05hbWUpOwogICAgICB9CiAgICB9LAogICAgcmVtb3ZlVGFnKGl0ZW0pIHsKICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmFydGljbGUudGFnTmFtZUxpc3QuaW5kZXhPZihpdGVtKTsKICAgICAgdGhpcy5hcnRpY2xlLnRhZ05hbWVMaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdGFnQ2xhc3MoKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5hcnRpY2xlLnRhZ05hbWVMaXN0LmluZGV4T2YoaXRlbS50YWdOYW1lKTsKICAgICAgICByZXR1cm4gaW5kZXggIT0gLTEgPyAidGFnLWl0ZW0tc2VsZWN0IiA6ICJ0YWctaXRlbSI7CiAgICAgIH07CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["imageConversion","created","path","$route","arr","split","articleId","token","$store","state","localStorage","getItem","axios","get","headers","then","data","article","catch","error","response","status","$router","push","sessionStorage","JSON","parse","destroyed","autoSaveArticle","addOrEdit","autoSave","categoryName","tagName","categoryList","tagList","typeList","type","desc","id","articleTitle","$moment","Date","format","articleContent","articleCover","tagNameList","originalUrl","isTop","methods","listCategories","recordList","console","log","listTags","openModel","trim","$message","uploadCover","beforeUpload","file","Promise","resolve","size","config","UPLOAD_SIZE","compressAccurately","res","window","File","name","uploadImg","pos","formdata","FormData","append","post","imgUrlWithTimestamp","getTime","$refs","md","$img2Url","saveArticleDraft","flag","commit","removeItem","err","$notify","success","title","message","saveOrUpdateArticle","length","Set","setItem","stringify","searchCategories","keywords","cb","params","handleSelectCategories","item","addCategory","saveCategory","removeCategory","searchTags","handleSelectTag","addTag","saveTag","indexOf","removeTag","index","splice","computed","tagClass"],"sources":["src/views/article/Article.vue"],"sourcesContent":["<template>\n  <el-card class=\"main-card\">\n    <div class=\"title\">{{ this.$route.name }}</div>\n    <!-- 文章标题 -->\n    <div class=\"article-title-container\">\n      <el-input\n        v-model=\"article.articleTitle\"\n        size=\"medium\"\n        placeholder=\"输入文章标题\"\n      />\n      <el-button\n        type=\"danger\"\n        size=\"medium\"\n        class=\"save-btn\"\n        @click=\"saveArticleDraft\"\n        v-if=\"article.id == null || article.status == 3\"\n      >\n        保存草稿\n      </el-button>\n      <el-button\n        type=\"danger\"\n        size=\"medium\"\n        @click=\"openModel\"\n        style=\"margin-left:10px\"\n      >\n        发布文章\n      </el-button>\n    </div>\n    <!-- 文章内容 -->\n    <mavon-editor\n      ref=\"md\"\n      v-model=\"article.articleContent\"\n      @imgAdd=\"uploadImg\"\n      style=\"height:calc(100vh - 260px)\"\n    />\n    <!-- 添加文章对话框 -->\n    <el-dialog :visible.sync=\"addOrEdit\" width=\"40%\" top=\"3vh\">\n      <div class=\"dialog-title-container\" slot=\"title\">\n        发布文章\n      </div>\n      <!-- 文章数据 -->\n      <el-form label-width=\"80px\" size=\"medium\" :model=\"article\">\n        <!-- 文章分类 -->\n        <el-form-item label=\"文章分类\">\n          <el-tag\n            type=\"success\"\n            v-show=\"article.categoryName\"\n            style=\"margin:0 1rem 0 0\"\n            :closable=\"true\"\n            @close=\"removeCategory\"\n          >\n            {{ article.categoryName }}\n          </el-tag>\n          <!-- 分类选项 -->\n          <el-popover\n            placement=\"bottom-start\"\n            width=\"460\"\n            trigger=\"click\"\n            v-if=\"!article.categoryName\"\n          >\n            <div class=\"popover-title\">分类</div>\n            <!-- 搜索框 -->\n            <el-autocomplete\n              style=\"width:100%\"\n              v-model=\"categoryName\"\n              :fetch-suggestions=\"searchCategories\"\n              placeholder=\"请输入分类名搜索，enter可添加自定义分类\"\n              :trigger-on-focus=\"false\"\n              @keyup.enter.native=\"saveCategory\"\n              @select=\"handleSelectCategories\"\n            >\n              <template slot-scope=\"{ item }\">\n                <div>{{ item.categoryName }}</div>\n              </template>\n            </el-autocomplete>\n            <!-- 分类 -->\n            <div class=\"popover-container\">\n              <div\n                v-for=\"item of categoryList\"\n                :key=\"item.id\"\n                class=\"category-item\"\n                @click=\"addCategory(item)\"\n              >\n                {{ item.categoryName }}\n              </div>\n            </div>\n            <el-button type=\"success\" plain slot=\"reference\" size=\"small\">\n              添加分类\n            </el-button>\n          </el-popover>\n        </el-form-item>\n        <!-- 文章标签 -->\n        <el-form-item label=\"文章标签\">\n          <el-tag\n            v-for=\"(item, index) of article.tagNameList\"\n            :key=\"index\"\n            style=\"margin:0 1rem 0 0\"\n            :closable=\"true\"\n            @close=\"removeTag(item)\"\n          >\n            {{ item }}\n          </el-tag>\n          <!-- 标签选项 -->\n          <el-popover\n            placement=\"bottom-start\"\n            width=\"460\"\n            trigger=\"click\"\n            v-if=\"article.tagNameList.length < 3\"\n          >\n            <div class=\"popover-title\">标签</div>\n            <!-- 搜索框 -->\n            <el-autocomplete\n              style=\"width:100%\"\n              v-model=\"tagName\"\n              :fetch-suggestions=\"searchTags\"\n              placeholder=\"请输入标签名搜索，enter可添加自定义标签\"\n              :trigger-on-focus=\"false\"\n              @keyup.enter.native=\"saveTag\"\n              @select=\"handleSelectTag\"\n            >\n              <template slot-scope=\"{ item }\">\n                <div>{{ item.tagName }}</div>\n              </template>\n            </el-autocomplete>\n            <!-- 标签 -->\n            <div class=\"popover-container\">\n              <div style=\"margin-bottom:1rem\">添加标签</div>\n              <el-tag\n                v-for=\"(item, index) of tagList\"\n                :key=\"index\"\n                :class=\"tagClass(item)\"\n                @click=\"addTag(item)\"\n              >\n                {{ item.tagName }}\n              </el-tag>\n            </div>\n            <el-button type=\"primary\" plain slot=\"reference\" size=\"small\">\n              添加标签\n            </el-button>\n          </el-popover>\n        </el-form-item>\n        <el-form-item label=\"文章类型\">\n          <el-select v-model=\"article.type\" placeholder=\"请选择类型\">\n            <el-option\n              v-for=\"item in typeList\"\n              :key=\"item.type\"\n              :label=\"item.desc\"\n              :value=\"item.type\"\n            />\n          </el-select>\n        </el-form-item>\n        <!-- 文章类型 -->\n        <el-form-item label=\"原文地址\" v-if=\"article.type != 1\">\n          <el-input\n            v-model=\"article.originalUrl\"\n            placeholder=\"请填写原文链接\"\n          />\n        </el-form-item>\n        <el-form-item label=\"上传封面\">\n          <el-upload\n            class=\"upload-cover\"\n            drag\n            action=\"/api/admin/articles/images\"\n            multiple\n            :before-upload=\"beforeUpload\"\n            :on-success=\"uploadCover\"\n          >\n            <i class=\"el-icon-upload\" v-if=\"article.articleCover == ''\" />\n            <div class=\"el-upload__text\" v-if=\"article.articleCover == ''\">\n              将文件拖到此处，或<em>点击上传</em>\n            </div>\n            <img\n              v-else\n              :src=\"article.articleCover\"\n              width=\"360px\"\n              height=\"180px\"\n            />\n          </el-upload>\n        </el-form-item>\n        <el-form-item label=\"置顶\">\n          <el-switch\n            v-model=\"article.isTop\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#F4F4F5\"\n            :active-value=\"1\"\n            :inactive-value=\"0\"\n          />\n        </el-form-item>\n        <el-form-item label=\"发布形式\">\n          <el-radio-group v-model=\"article.status\">\n            <el-radio :label=\"1\">公开</el-radio>\n            <el-radio :label=\"2\">私密</el-radio>\n          </el-radio-group>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\">\n        <el-button @click=\"addOrEdit = false\">取 消</el-button>\n        <el-button type=\"danger\" @click=\"saveOrUpdateArticle\">\n          发 表\n        </el-button>\n      </div>\n    </el-dialog>\n  </el-card>\n</template>\n\n<script>\nimport * as imageConversion from \"image-conversion\";\n\nexport default {\n  created() {\n    const path = this.$route.path;\n    const arr = path.split(\"/\");\n    const articleId = arr[2];\n    if (articleId) {\n      const token = this.$store.state.token || localStorage.getItem('token');\n      this.axios.get(\"/api/admin/articles/\" + articleId, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }).then(({ data }) => {\n        this.article = data.data;\n      }).catch(error => {\n        if (error.response && error.response.status === 401) {\n          this.$router.push('/login');\n        }\n      });\n    } else {\n      const article = sessionStorage.getItem(\"article\");\n      if (article) {\n        this.article = JSON.parse(article);\n      }\n    }\n  },\n  destroyed() {\n    //文章自动保存功能\n    this.autoSaveArticle();\n  },\n  data: function() {\n    return {\n      addOrEdit: false,\n      autoSave: true,\n      categoryName: \"\",\n      tagName: \"\",\n      categoryList: [],\n      tagList: [],\n      typeList: [\n        {\n          type: 1,\n          desc: \"原创\"\n        },\n        {\n          type: 2,\n          desc: \"转载\"\n        },\n        {\n          type: 3,\n          desc: \"翻译\"\n        }\n      ],\n      article: {\n        id: null,\n        articleTitle: this.$moment(new Date()).format(\"YYYY-MM-DD\"),\n        articleContent: \"\",\n        articleCover: \"\",\n        categoryName: null,\n        tagNameList: [],\n        originalUrl: \"\",\n        isTop: 0,\n        type: 1,\n        status: 1\n      }\n    };\n  },\n  methods: {\n    listCategories() {\n      this.axios.get(\"/api/admin/categories/search\", {\n      }).then(({ data }) => {\n        this.categoryList = data.data.recordList;\n        console.log(\"Loaded categories:\", this.categoryList); // 检查获取到的分类数据\n      }).catch(error => {\n        console.error(\"Error loading categories:\", error);\n      });\n    },\n    listTags() {\n      this.axios.get(\"/api/admin/tags/search\", {\n      }).then(({ data }) => {\n        this.tagList = data.data;\n      });\n    },\n    openModel() {\n      if (this.article.articleTitle.trim() == \"\") {\n        this.$message.error(\"文章标题不能为空\");\n        return false;\n      }\n      if (this.article.articleContent.trim() == \"\") {\n        this.$message.error(\"文章内容不能为空\");\n        return false;\n      }\n      this.listCategories();\n      this.listTags();\n      this.addOrEdit = true;\n    },\n    uploadCover(response) {\n      console.log(\"Upload response:\", response);\n      this.article.articleCover = response.data;\n    },\n    beforeUpload(file) {\n      console.log(\"Received file for upload:\", file);\n      return new Promise(resolve => {\n        if (file.size / 1024 < this.config.UPLOAD_SIZE) {\n          console.log(\"File size is within limit, proceeding with upload.\");\n          resolve(file); // 直接上传文件\n        } else {\n          console.log(\"File size exceeds limit, compressing...\");\n          imageConversion\n              .compressAccurately(file, this.config.UPLOAD_SIZE)\n              .then(res => {\n                console.log(\"File compression successful:\", res);\n                // 确保压缩后的文件对象被传递到 resolve 回调中\n                resolve(new window.File([res], file.name, { type: file.type }));\n              })\n              .catch(error => {\n                console.error(\"Error during file compression:\", error);\n              });\n        }\n      });\n    },\n    uploadImg(pos, file) {\n      const token = this.$store.state.token || localStorage.getItem('token');\n      var formdata = new FormData();\n      if (file.size / 1024 < this.config.UPLOAD_SIZE) {\n        formdata.append(\"file\", file);\n        this.axios.post(\"/api/admin/articles/images\", formdata).then(({ data }) => {\n          const imgUrlWithTimestamp = `${data.data}?t=${new Date().getTime()}`;\n          console.log(\"URL to insert:\", imgUrlWithTimestamp);\n          this.$refs.md.$img2Url(pos, imgUrlWithTimestamp);\n        });\n      } else {\n        imageConversion\n            .compressAccurately(file, this.config.UPLOAD_SIZE)\n            .then(res => {\n              formdata.append(\n                  \"file\",\n                  new window.File([res], file.name, { type: file.type })\n              );\n              this.axios.post(\"/api/admin/articles/images\", formdata, {\n                headers: {\n                  'Authorization': `Bearer ${token}`\n                }\n              }).then(({ data }) => {\n                const imgUrlWithTimestamp = `${data.data}?t=${new Date().getTime()}`;\n                console.log(\"URL to insert:\", imgUrlWithTimestamp);\n                this.$refs.md.$img2Url(pos, imgUrlWithTimestamp);\n              });\n            });\n      }\n    },\n\n    saveArticleDraft() {\n      if (this.article.articleTitle.trim() == \"\") {\n        this.$message.error(\"文章标题不能为空\");\n        return false;\n      }\n      if (this.article.articleContent.trim() == \"\") {\n        this.$message.error(\"文章内容不能为空\");\n        return false;\n      }\n      this.article.status = 3;\n      const token = this.$store.state.token || localStorage.getItem('token');\n      this.axios.post(\"/api/admin/articles\", this.article, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }).then(({ data }) => {\n        if (data.flag) {\n          if (this.article.id === null) {\n            this.$store.commit(\"removeTab\", \"发布文章\");\n          } else {\n            this.$store.commit(\"removeTab\", \"修改文章\");\n          }\n          sessionStorage.removeItem(\"article\");\n\n          if (this.$route.path !== '/article-list') {\n            this.$router.push({ path: \"/article-list\" }).catch(err => {\n              if (err.name !== 'NavigationDuplicated') {\n                throw err;\n              }\n            });\n          }\n\n          this.$notify.success({\n            title: \"成功\",\n            message: \"保存草稿成功\"\n          });\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: \"保存草稿失败\"\n          });\n        }\n      }).catch(error => {\n        if (error.response && error.response.status === 401) {\n          this.$router.push('/login');\n        } else {\n          this.$notify.error({\n            title: \"请求失败\",\n            message: error.message\n          });\n        }\n      });\n\n      this.autoSave = false;\n    },\n    saveOrUpdateArticle() {\n      if (this.article.articleTitle.trim() == \"\") {\n        this.$message.error(\"文章标题不能为空\");\n        return false;\n      }\n      if (this.article.articleContent.trim() == \"\") {\n        this.$message.error(\"文章内容不能为空\");\n        return false;\n      }\n      if (this.article.categoryName == null) {\n        this.$message.error(\"文章分类不能为空\");\n        return false;\n      }\n      if (this.article.tagNameList.length == 0) {\n        this.$message.error(\"文章标签不能为空\");\n        return false;\n      }\n      if (this.article.articleCover.trim() == \"\") {\n        this.$message.error(\"文章封面不能为空\");\n        return false;\n      }\n      // 前端去重处理（如果需要）\n      this.article.tagNameList = [...new Set(this.article.tagNameList)];\n      const token = this.$store.state.token || localStorage.getItem('token');\n      this.axios.post(\"/api/admin/articles\", this.article, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }).then(({ data }) => {\n        console.log(\"Response data:\", data); // 打印接收到的数据\n        if (data.flag) {\n          console.log(\"Submitting article with category:\", this.article.categoryName);\n          if (this.article.id === null) {\n            this.$store.commit(\"removeTab\", \"发布文章\");\n          } else {\n            this.$store.commit(\"removeTab\", \"修改文章\");\n          }\n          sessionStorage.removeItem(\"article\");\n\n          if (this.$route.path !== '/article-list') {\n            this.$router.push({ path: \"/article-list\" }).catch(err => {\n              if (err.name !== 'NavigationDuplicated') {\n                throw err;\n              }\n            });\n          }\n\n          this.$notify.success({\n            title: \"成功\",\n            message: data.message\n          });\n        } else {\n          this.$notify.error({\n            title: \"失败\",\n            message: data.message\n          });\n        }\n        this.addOrEdit = false;\n      }).catch(error => {\n        if (error.response && error.response.status === 401) {\n          this.$router.push('/login');\n        } else {\n          this.$notify.error({\n            title: \"请求失败\",\n            message: error.message\n          });\n        }\n      });\n\n      this.autoSave = false;\n    },\n    autoSaveArticle() {\n      if (\n          this.autoSave &&\n          this.article.articleTitle.trim() != \"\" &&\n          this.article.articleContent.trim() != \"\" &&\n          this.article.id != null\n      ) {\n        const token = this.$store.state.token || localStorage.getItem('token');\n        this.axios.post(\"/api/admin/articles\", this.article, {\n          headers: {\n            'Authorization': `Bearer ${token}`\n          }\n        }).then(({ data }) => {\n          if (data.flag) {\n            this.$notify.success({\n              title: \"成功\",\n              message: \"自动保存成功\"\n            });\n          } else {\n            this.$notify.error({\n              title: \"失败\",\n              message: \"自动保存失败\"\n            });\n          }\n        }).catch(error => {\n          if (error.response && error.response.status === 401) {\n            this.$router.push('/login');\n          } else {\n            this.$notify.error({\n              title: \"请求失败\",\n              message: error.message\n            });\n          }\n        });\n      }\n\n      if (this.autoSave && this.article.id == null) {\n        sessionStorage.setItem(\"article\", JSON.stringify(this.article));\n      }\n    },\n    searchCategories(keywords, cb) {\n      this.axios.get(\"/api/admin/categories/search\", {\n        params: {\n          keywords: keywords\n        },\n      }).then(({ data }) => {\n        console.log(\"Fetched categories:\", data.data); // 日志输出返回的数据\n        cb(data.data);\n      });\n    },\n    handleSelectCategories(item) {\n      this.addCategory({\n        categoryName: item.categoryName\n      });\n    },\n    saveCategory() {\n      if (this.categoryName.trim() != \"\") {\n        this.addCategory({\n          categoryName: this.categoryName\n        });\n        this.categoryName = \"\";\n      }\n    },\n    addCategory(item) {\n      this.article.categoryName = item.categoryName;\n    },\n    removeCategory() {\n      this.article.categoryName = null;\n    },\n    searchTags(keywords, cb) {\n      this.axios.get(\"/api/admin/tags/search\", {\n        params: {\n          keywords: keywords\n        },\n      }).then(({ data }) => {\n        cb(data.data);\n      });\n    },\n    handleSelectTag(item) {\n      this.addTag({\n        tagName: item.tagName\n      });\n    },\n    saveTag() {\n      if (this.tagName.trim() != \"\") {\n        this.addTag({\n          tagName: this.tagName\n        });\n        this.tagName = \"\";\n      }\n    },\n    addTag(item) {\n      if (this.article.tagNameList.indexOf(item.tagName) == -1) {\n        this.article.tagNameList.push(item.tagName);\n      }\n    },\n    removeTag(item) {\n      const index = this.article.tagNameList.indexOf(item);\n      this.article.tagNameList.splice(index, 1);\n    }\n  },\n  computed: {\n    tagClass() {\n      return function(item) {\n        const index = this.article.tagNameList.indexOf(item.tagName);\n        return index != -1 ? \"tag-item-select\" : \"tag-item\";\n      };\n    }\n  }\n};\n</script>\n\n\n<style scoped>\n.article-title-container {\n  display: flex;\n  align-items: center;\n  margin-bottom: 1.25rem;\n  margin-top: 2.25rem;\n}\n.save-btn {\n  margin-left: 0.75rem;\n  background: #fff;\n  color: #f56c6c;\n}\n.tag-item {\n  margin-right: 1rem;\n  margin-bottom: 1rem;\n  cursor: pointer;\n}\n.tag-item-select {\n  margin-right: 1rem;\n  margin-bottom: 1rem;\n  cursor: not-allowed;\n  color: #ccccd8 !important;\n}\n.category-item {\n  cursor: pointer;\n  padding: 0.6rem 0.5rem;\n}\n.category-item:hover {\n  background-color: #f0f9eb;\n  color: #67c23a;\n}\n.popover-title {\n  margin-bottom: 1rem;\n  text-align: center;\n}\n.popover-container {\n  margin-top: 1rem;\n  height: 260px;\n  overflow-y: auto;\n}\n</style>\n"],"mappings":"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"}]}