{"remainingRequest":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\babel-loader\\lib\\index.js!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\src\\views\\about\\About.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\src\\views\\about\\About.vue","mtime":1659112848000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\babel.config.js","mtime":1659112848000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgaW1hZ2VDb252ZXJzaW9uIGZyb20gImltYWdlLWNvbnZlcnNpb24iOwpleHBvcnQgZGVmYXVsdCB7CiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0QWJvdXQoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGFib3V0Q29udGVudDogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRBYm91dCgpIHsKICAgICAgdGhpcy5heGlvcy5nZXQoIi9hcGkvYWJvdXQiKS50aGVuKCh7CiAgICAgICAgZGF0YQogICAgICB9KSA9PiB7CiAgICAgICAgdGhpcy5hYm91dENvbnRlbnQgPSBkYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIHVwbG9hZEltZyhwb3MsIGZpbGUpIHsKICAgICAgdmFyIGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGlmIChmaWxlLnNpemUgLyAxMDI0IDwgdGhpcy5jb25maWcuVVBMT0FEX1NJWkUpIHsKICAgICAgICBmb3JtZGF0YS5hcHBlbmQoImZpbGUiLCBmaWxlKTsKICAgICAgICB0aGlzLmF4aW9zLnBvc3QoIi9hcGkvYWRtaW4vYXJ0aWNsZXMvaW1hZ2VzIiwgZm9ybWRhdGEpLnRoZW4oKHsKICAgICAgICAgIGRhdGEKICAgICAgICB9KSA9PiB7CiAgICAgICAgICB0aGlzLiRyZWZzLm1kLiRpbWcyVXJsKHBvcywgZGF0YS5kYXRhKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDljovnvKnliLAyMDBLQizov5nph4znmoQyMDDlsLHmmK/opoHljovnvKnnmoTlpKflsI8s5Y+v6Ieq5a6a5LmJCiAgICAgICAgaW1hZ2VDb252ZXJzaW9uLmNvbXByZXNzQWNjdXJhdGVseShmaWxlLCB0aGlzLmNvbmZpZy5VUExPQURfU0laRSkudGhlbihyZXMgPT4gewogICAgICAgICAgZm9ybWRhdGEuYXBwZW5kKCJmaWxlIiwgbmV3IHdpbmRvdy5GaWxlKFtyZXNdLCBmaWxlLm5hbWUsIHsKICAgICAgICAgICAgdHlwZTogZmlsZS50eXBlCiAgICAgICAgICB9KSk7CiAgICAgICAgICB0aGlzLmF4aW9zLnBvc3QoIi9hcGkvYWRtaW4vYXJ0aWNsZXMvaW1hZ2VzIiwgZm9ybWRhdGEpLnRoZW4oKHsKICAgICAgICAgICAgZGF0YQogICAgICAgICAgfSkgPT4gewogICAgICAgICAgICB0aGlzLiRyZWZzLm1kLiRpbWcyVXJsKHBvcywgZGF0YS5kYXRhKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlQWJvdXQoKSB7CiAgICAgIHRoaXMuYXhpb3MucHV0KCIvYXBpL2FkbWluL2Fib3V0IiwgewogICAgICAgIGFib3V0Q29udGVudDogdGhpcy5hYm91dENvbnRlbnQKICAgICAgfSkudGhlbigoewogICAgICAgIGRhdGEKICAgICAgfSkgPT4gewogICAgICAgIGlmIChkYXRhLmZsYWcpIHsKICAgICAgICAgIHRoaXMuJG5vdGlmeS5zdWNjZXNzKHsKICAgICAgICAgICAgdGl0bGU6ICLmiJDlip8iLAogICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRub3RpZnkuZXJyb3IoewogICAgICAgICAgICB0aXRsZTogIuWksei0pSIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["imageConversion","created","getAbout","data","aboutContent","methods","axios","get","then","uploadImg","pos","file","formdata","FormData","size","config","UPLOAD_SIZE","append","post","$refs","md","$img2Url","compressAccurately","res","window","File","name","type","updateAbout","put","flag","$notify","success","title","message","error"],"sources":["src/views/about/About.vue"],"sourcesContent":["<template>\n  <el-card class=\"main-card\">\n    <div class=\"title\">{{ this.$route.name }}</div>\n    <mavon-editor\n      ref=\"md\"\n      @imgAdd=\"uploadImg\"\n      v-model=\"aboutContent\"\n      style=\"height:calc(100vh - 250px);margin-top:2.25rem\"\n    />\n    <el-button\n      type=\"danger\"\n      size=\"medium\"\n      class=\"edit-btn\"\n      @click=\"updateAbout\"\n    >\n      修改\n    </el-button>\n  </el-card>\n</template>\n\n<script>\nimport * as imageConversion from \"image-conversion\";\nexport default {\n  created() {\n    this.getAbout();\n  },\n  data: function() {\n    return {\n      aboutContent: \"\"\n    };\n  },\n  methods: {\n    getAbout() {\n      this.axios.get(\"/api/about\").then(({ data }) => {\n        this.aboutContent = data.data;\n      });\n    },\n    uploadImg(pos, file) {\n      var formdata = new FormData();\n      if (file.size / 1024 < this.config.UPLOAD_SIZE) {\n        formdata.append(\"file\", file);\n        this.axios\n          .post(\"/api/admin/articles/images\", formdata)\n          .then(({ data }) => {\n            this.$refs.md.$img2Url(pos, data.data);\n          });\n      } else {\n        // 压缩到200KB,这里的200就是要压缩的大小,可自定义\n        imageConversion\n          .compressAccurately(file, this.config.UPLOAD_SIZE)\n          .then(res => {\n            formdata.append(\n              \"file\",\n              new window.File([res], file.name, { type: file.type })\n            );\n            this.axios\n              .post(\"/api/admin/articles/images\", formdata)\n              .then(({ data }) => {\n                this.$refs.md.$img2Url(pos, data.data);\n              });\n          });\n      }\n    },\n    updateAbout() {\n      this.axios\n        .put(\"/api/admin/about\", {\n          aboutContent: this.aboutContent\n        })\n        .then(({ data }) => {\n          if (data.flag) {\n            this.$notify.success({\n              title: \"成功\",\n              message: data.message\n            });\n          } else {\n            this.$notify.error({\n              title: \"失败\",\n              message: data.message\n            });\n          }\n        });\n    }\n  }\n};\n</script>\n\n<style scoped>\n.edit-btn {\n  float: right;\n  margin: 1rem 0;\n}\n</style>\n"],"mappings":"AAqBA,YAAAA,eAAA;AACA;EACAC,QAAA;IACA,KAAAC,QAAA;EACA;EACAC,IAAA,WAAAA,CAAA;IACA;MACAC,YAAA;IACA;EACA;EACAC,OAAA;IACAH,SAAA;MACA,KAAAI,KAAA,CAAAC,GAAA,eAAAC,IAAA;QAAAL;MAAA;QACA,KAAAC,YAAA,GAAAD,IAAA,CAAAA,IAAA;MACA;IACA;IACAM,UAAAC,GAAA,EAAAC,IAAA;MACA,IAAAC,QAAA,OAAAC,QAAA;MACA,IAAAF,IAAA,CAAAG,IAAA,eAAAC,MAAA,CAAAC,WAAA;QACAJ,QAAA,CAAAK,MAAA,SAAAN,IAAA;QACA,KAAAL,KAAA,CACAY,IAAA,+BAAAN,QAAA,EACAJ,IAAA;UAAAL;QAAA;UACA,KAAAgB,KAAA,CAAAC,EAAA,CAAAC,QAAA,CAAAX,GAAA,EAAAP,IAAA,CAAAA,IAAA;QACA;MACA;QACA;QACAH,eAAA,CACAsB,kBAAA,CAAAX,IAAA,OAAAI,MAAA,CAAAC,WAAA,EACAR,IAAA,CAAAe,GAAA;UACAX,QAAA,CAAAK,MAAA,CACA,QACA,IAAAO,MAAA,CAAAC,IAAA,EAAAF,GAAA,GAAAZ,IAAA,CAAAe,IAAA;YAAAC,IAAA,EAAAhB,IAAA,CAAAgB;UAAA,EACA;UACA,KAAArB,KAAA,CACAY,IAAA,+BAAAN,QAAA,EACAJ,IAAA;YAAAL;UAAA;YACA,KAAAgB,KAAA,CAAAC,EAAA,CAAAC,QAAA,CAAAX,GAAA,EAAAP,IAAA,CAAAA,IAAA;UACA;QACA;MACA;IACA;IACAyB,YAAA;MACA,KAAAtB,KAAA,CACAuB,GAAA;QACAzB,YAAA,OAAAA;MACA,GACAI,IAAA;QAAAL;MAAA;QACA,IAAAA,IAAA,CAAA2B,IAAA;UACA,KAAAC,OAAA,CAAAC,OAAA;YACAC,KAAA;YACAC,OAAA,EAAA/B,IAAA,CAAA+B;UACA;QACA;UACA,KAAAH,OAAA,CAAAI,KAAA;YACAF,KAAA;YACAC,OAAA,EAAA/B,IAAA,CAAA+B;UACA;QACA;MACA;IACA;EACA;AACA"}]}