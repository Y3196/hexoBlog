{"remainingRequest":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\babel-loader\\lib\\index.js!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\src\\assets\\js\\menu.js","dependencies":[{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\src\\assets\\js\\menu.js","mtime":1724320794960},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\babel.config.js","mtime":1659112848000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBMYXlvdXQgZnJvbSAiQC9sYXlvdXQvaW5kZXgudnVlIjsKaW1wb3J0IHJvdXRlciBmcm9tICIuLi8uLi9yb3V0ZXIiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi4vLi4vc3RvcmUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgVnVlIGZyb20gInZ1ZSI7CmV4cG9ydCBmdW5jdGlvbiBnZW5lcmFNZW51KCkgewogIGNvbnN0IHRva2VuID0gc3RvcmUuc3RhdGUudG9rZW4gfHwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CiAgYXhpb3MuZ2V0KCIvYXBpL2FkbWluL3VzZXIvbWVudXMiLCB7CiAgICBoZWFkZXJzOiB7CiAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Rva2VufWAKICAgIH0KICB9KS50aGVuKCh7CiAgICBkYXRhCiAgfSkgPT4gewogICAgLy9jb25zb2xlLmxvZygnQVBJIHJlc3BvbnNlOicsIGRhdGEpOwogICAgaWYgKGRhdGEuZGF0YSkgewogICAgICB2YXIgdXNlck1lbnVMaXN0ID0gZGF0YS5kYXRhOwogICAgICAvLyBjb25zb2xlLmxvZygnTWVudSBsaXN0OicsIHVzZXJNZW51TGlzdCk7CgogICAgICB1c2VyTWVudUxpc3QuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICBpZiAoaXRlbS5pY29uICE9IG51bGwpIHsKICAgICAgICAgIGl0ZW0uaWNvbiA9ICJpY29uZm9udCAiICsgaXRlbS5pY29uOwogICAgICAgIH0KICAgICAgICBpZiAoaXRlbS5jb21wb25lbnQgPT09ICJMYXlvdXQiKSB7CiAgICAgICAgICBpdGVtLmNvbXBvbmVudCA9IExheW91dDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaXRlbS5jb21wb25lbnQgPSBsb2FkVmlldyhpdGVtLmNvbXBvbmVudCk7CiAgICAgICAgfQogICAgICAgIGlmIChpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgICAgaXRlbS5jaGlsZHJlbi5mb3JFYWNoKHJvdXRlID0+IHsKICAgICAgICAgICAgcm91dGUuaWNvbiA9ICJpY29uZm9udCAiICsgcm91dGUuaWNvbjsKICAgICAgICAgICAgcm91dGUuY29tcG9uZW50ID0gbG9hZFZpZXcocm91dGUuY29tcG9uZW50KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHN0b3JlLmNvbW1pdCgic2F2ZVVzZXJNZW51TGlzdCIsIHVzZXJNZW51TGlzdCk7CgogICAgICAvLyDnoa7kv53mr4/kuKrot6/nlLHpg73ooqvmt7vliqAKICAgICAgdXNlck1lbnVMaXN0LmZvckVhY2gobWVudSA9PiB7CiAgICAgICAgLy9jb25zb2xlLmxvZygnQWRkaW5nIHJvdXRlOicsIG1lbnUpOwogICAgICAgIHJvdXRlci5hZGRSb3V0ZShtZW51KTsKICAgICAgfSk7CgogICAgICAvLyAgIGNvbnNvbGUubG9nKCdBbGwgcm91dGVzOicsIHJvdXRlci5nZXRSb3V0ZXMoKSk7CiAgICB9IGVsc2UgewogICAgICBWdWUucHJvdG90eXBlLiRtZXNzYWdlLmVycm9yKGRhdGEubWVzc2FnZSk7CiAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAiL2xvZ2luIgogICAgICB9KTsKICAgIH0KICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICBWdWUucHJvdG90eXBlLiRtZXNzYWdlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCB1c2VyIG1lbnVzJyk7CiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIHVzZXIgbWVudXM6JywgZXJyb3IpOwogIH0pOwp9CmV4cG9ydCBjb25zdCBsb2FkVmlldyA9IHZpZXcgPT4gewogIC8vIGNvbnNvbGUubG9nKCdMb2FkaW5nIHZpZXc6Jywgdmlldyk7CiAgLy8g5pqC5pe256aB55So5oeS5Yqg6L29CiAgcmV0dXJuIHJlcXVpcmUoYEAvdmlld3Mke3ZpZXd9YCkuZGVmYXVsdDsKfTs="},{"version":3,"names":["Layout","router","store","axios","Vue","generaMenu","token","state","localStorage","getItem","get","headers","then","data","userMenuList","forEach","item","icon","component","loadView","children","length","route","commit","menu","addRoute","prototype","$message","error","message","push","path","catch","console","view","require","default"],"sources":["E:/sourceCode/Backend/blog-master/blog-vue/admin/src/assets/js/menu.js"],"sourcesContent":["import Layout from \"@/layout/index.vue\";\nimport router from \"../../router\";\nimport store from \"../../store\";\nimport axios from \"axios\";\nimport Vue from \"vue\";\n\nexport function generaMenu() {\n  const token = store.state.token || localStorage.getItem('token');\n  axios.get(\"/api/admin/user/menus\", {\n    headers: {\n      'Authorization': `Bearer ${token}`\n    }\n  }).then(({ data }) => {\n    //console.log('API response:', data);\n    if (data.data) {\n      var userMenuList = data.data;\n     // console.log('Menu list:', userMenuList);\n\n      userMenuList.forEach(item => {\n        if (item.icon != null) {\n          item.icon = \"iconfont \" + item.icon;\n        }\n        if (item.component === \"Layout\") {\n          item.component = Layout;\n        } else {\n          item.component = loadView(item.component);\n        }\n        if (item.children && item.children.length > 0) {\n          item.children.forEach(route => {\n            route.icon = \"iconfont \" + route.icon;\n            route.component = loadView(route.component);\n          });\n        }\n      });\n\n      store.commit(\"saveUserMenuList\", userMenuList);\n\n      // 确保每个路由都被添加\n      userMenuList.forEach(menu => {\n        //console.log('Adding route:', menu);\n        router.addRoute(menu);\n      });\n\n   //   console.log('All routes:', router.getRoutes());\n\n    } else {\n      Vue.prototype.$message.error(data.message);\n      router.push({ path: \"/login\" });\n    }\n  }).catch(error => {\n    Vue.prototype.$message.error('Failed to load user menus');\n    console.error('Error loading user menus:', error);\n  });\n}\n\nexport const loadView = view => {\n // console.log('Loading view:', view);\n  // 暂时禁用懒加载\n  return require(`@/views${view}`).default;\n};\n\n"],"mappings":";AAAA,OAAOA,MAAM,MAAM,oBAAoB;AACvC,OAAOC,MAAM,MAAM,cAAc;AACjC,OAAOC,KAAK,MAAM,aAAa;AAC/B,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,GAAG,MAAM,KAAK;AAErB,OAAO,SAASC,UAAUA,CAAA,EAAG;EAC3B,MAAMC,KAAK,GAAGJ,KAAK,CAACK,KAAK,CAACD,KAAK,IAAIE,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAChEN,KAAK,CAACO,GAAG,CAAC,uBAAuB,EAAE;IACjCC,OAAO,EAAE;MACP,eAAe,EAAG,UAASL,KAAM;IACnC;EACF,CAAC,CAAC,CAACM,IAAI,CAAC,CAAC;IAAEC;EAAK,CAAC,KAAK;IACpB;IACA,IAAIA,IAAI,CAACA,IAAI,EAAE;MACb,IAAIC,YAAY,GAAGD,IAAI,CAACA,IAAI;MAC7B;;MAECC,YAAY,CAACC,OAAO,CAACC,IAAI,IAAI;QAC3B,IAAIA,IAAI,CAACC,IAAI,IAAI,IAAI,EAAE;UACrBD,IAAI,CAACC,IAAI,GAAG,WAAW,GAAGD,IAAI,CAACC,IAAI;QACrC;QACA,IAAID,IAAI,CAACE,SAAS,KAAK,QAAQ,EAAE;UAC/BF,IAAI,CAACE,SAAS,GAAGlB,MAAM;QACzB,CAAC,MAAM;UACLgB,IAAI,CAACE,SAAS,GAAGC,QAAQ,CAACH,IAAI,CAACE,SAAS,CAAC;QAC3C;QACA,IAAIF,IAAI,CAACI,QAAQ,IAAIJ,IAAI,CAACI,QAAQ,CAACC,MAAM,GAAG,CAAC,EAAE;UAC7CL,IAAI,CAACI,QAAQ,CAACL,OAAO,CAACO,KAAK,IAAI;YAC7BA,KAAK,CAACL,IAAI,GAAG,WAAW,GAAGK,KAAK,CAACL,IAAI;YACrCK,KAAK,CAACJ,SAAS,GAAGC,QAAQ,CAACG,KAAK,CAACJ,SAAS,CAAC;UAC7C,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;MAEFhB,KAAK,CAACqB,MAAM,CAAC,kBAAkB,EAAET,YAAY,CAAC;;MAE9C;MACAA,YAAY,CAACC,OAAO,CAACS,IAAI,IAAI;QAC3B;QACAvB,MAAM,CAACwB,QAAQ,CAACD,IAAI,CAAC;MACvB,CAAC,CAAC;;MAEL;IAEC,CAAC,MAAM;MACLpB,GAAG,CAACsB,SAAS,CAACC,QAAQ,CAACC,KAAK,CAACf,IAAI,CAACgB,OAAO,CAAC;MAC1C5B,MAAM,CAAC6B,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAS,CAAC,CAAC;IACjC;EACF,CAAC,CAAC,CAACC,KAAK,CAACJ,KAAK,IAAI;IAChBxB,GAAG,CAACsB,SAAS,CAACC,QAAQ,CAACC,KAAK,CAAC,2BAA2B,CAAC;IACzDK,OAAO,CAACL,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;EACnD,CAAC,CAAC;AACJ;AAEA,OAAO,MAAMT,QAAQ,GAAGe,IAAI,IAAI;EAC/B;EACC;EACA,OAAOC,OAAO,CAAE,UAASD,IAAK,EAAC,CAAC,CAACE,OAAO;AAC1C,CAAC"}]}