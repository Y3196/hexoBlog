{"remainingRequest":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\babel-loader\\lib\\index.js!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\src\\views\\setting\\Setting.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\src\\views\\setting\\Setting.vue","mtime":1659112848000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\babel.config.js","mtime":1659112848000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnVybC1zZWFyY2gtcGFyYW1zLmRlbGV0ZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwtc2VhcmNoLXBhcmFtcy5oYXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuc2l6ZS5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICBpbmZvRm9ybTogewogICAgICAgIG5pY2tuYW1lOiB0aGlzLiRzdG9yZS5zdGF0ZS5uaWNrbmFtZSwKICAgICAgICBpbnRybzogdGhpcy4kc3RvcmUuc3RhdGUuaW50cm8sCiAgICAgICAgd2ViU2l0ZTogdGhpcy4kc3RvcmUuc3RhdGUud2ViU2l0ZQogICAgICB9LAogICAgICBwYXNzd29yZEZvcm06IHsKICAgICAgICBvbGRQYXNzd29yZDogIiIsCiAgICAgICAgbmV3UGFzc3dvcmQ6ICIiLAogICAgICAgIGNvbmZpcm1QYXNzd29yZDogIiIKICAgICAgfSwKICAgICAgYWN0aXZlTmFtZTogImluZm8iCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2xpY2sodGFiKSB7CiAgICAgIGlmICh0YWIuaW5kZXggPT0gMiAmJiB0aGlzLm5vdGljZSA9PSAiIikgewogICAgICAgIHRoaXMuYXhpb3MuZ2V0KCIvYXBpL2FkbWluL25vdGljZSIpLnRoZW4oKHsKICAgICAgICAgIGRhdGEKICAgICAgICB9KSA9PiB7CiAgICAgICAgICB0aGlzLm5vdGljZSA9IGRhdGEuZGF0YTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZUF2YXRhcihyZXNwb25zZSkgewogICAgICBpZiAocmVzcG9uc2UuZmxhZykgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhyZXNwb25zZS5tZXNzYWdlKTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUF2YXRhciIsIHJlc3BvbnNlLmRhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzcG9uc2UubWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVJbmZvKCkgewogICAgICBpZiAodGhpcy5pbmZvRm9ybS5uaWNrbmFtZS50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLmmLXnp7DkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgdGhpcy5heGlvcy5wdXQoIi9hcGkvdXNlcnMvaW5mbyIsIHRoaXMuaW5mb0Zvcm0pLnRoZW4oKHsKICAgICAgICBkYXRhCiAgICAgIH0pID0+IHsKICAgICAgICBpZiAoZGF0YS5mbGFnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoZGF0YS5tZXNzYWdlKTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidXBkYXRlVXNlckluZm8iLCB0aGlzLmluZm9Gb3JtKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlUGFzc3dvcmQoKSB7CiAgICAgIGlmICh0aGlzLnBhc3N3b3JkRm9ybS5vbGRQYXNzd29yZC50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLml6flr4bnoIHkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMucGFzc3dvcmRGb3JtLm5ld1Bhc3N3b3JkLnRyaW0oKSA9PSAiIikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWsOWvhueggeS4jeiDveS4uuepuiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5wYXNzd29yZEZvcm0ubmV3UGFzc3dvcmQubGVuZ3RoIDwgNikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuaWsOWvhueggeS4jeiDveWwkeS6jjbkvY0iKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMucGFzc3dvcmRGb3JtLm5ld1Bhc3N3b3JkICE9IHRoaXMucGFzc3dvcmRGb3JtLmNvbmZpcm1QYXNzd29yZCkgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuS4pOasoeWvhueggei+k+WFpeS4jeS4gOiHtCIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICB0aGlzLmF4aW9zLnB1dCgiL2FwaS9hZG1pbi91c2Vycy9wYXNzd29yZCIsIHRoaXMucGFzc3dvcmRGb3JtKS50aGVuKCh7CiAgICAgICAgZGF0YQogICAgICB9KSA9PiB7CiAgICAgICAgaWYgKGRhdGEuZmxhZykgewogICAgICAgICAgdGhpcy5wYXNzd29yZEZvcm0ub2xkUGFzc3dvcmQgPSAiIjsKICAgICAgICAgIHRoaXMucGFzc3dvcmRGb3JtLm5ld1Bhc3N3b3JkID0gIiI7CiAgICAgICAgICB0aGlzLnBhc3N3b3JkRm9ybS5jb25maXJtUGFzc3dvcmQgPSAiIjsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhkYXRhLm1lc3NhZ2UpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGRhdGEubWVzc2FnZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVOb3RpY2UoKSB7CiAgICAgIGlmICh0aGlzLm5vdGljZS50cmltKCkgPT0gIiIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLlhazlkYrkuI3og73kuLrnqboiKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgbGV0IHBhcmFtID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOwogICAgICBwYXJhbS5hcHBlbmQoIm5vdGljZSIsIHRoaXMubm90aWNlKTsKICAgICAgdGhpcy5heGlvcy5wdXQoIi9hcGkvYWRtaW4vbm90aWNlIiwgcGFyYW0pLnRoZW4oKHsKICAgICAgICBkYXRhCiAgICAgIH0pID0+IHsKICAgICAgICBpZiAoZGF0YS5mbGFnKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoZGF0YS5tZXNzYWdlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihkYXRhLm1lc3NhZ2UpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgYXZhdGFyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUuYXZhdGFyOwogICAgfQogIH0KfTs="},{"version":3,"names":["data","infoForm","nickname","$store","state","intro","webSite","passwordForm","oldPassword","newPassword","confirmPassword","activeName","methods","handleClick","tab","index","notice","axios","get","then","updateAvatar","response","flag","$message","success","message","commit","error","updateInfo","trim","put","updatePassword","length","updateNotice","param","URLSearchParams","append","computed","avatar"],"sources":["src/views/setting/Setting.vue"],"sourcesContent":["<template>\n  <el-card class=\"main-card\">\n    <el-tabs v-model=\"activeName\" @tab-click=\"handleClick\">\n      <!-- 修改信息 -->\n      <el-tab-pane label=\"修改信息\" name=\"info\">\n        <div class=\"info-container\">\n          <el-upload\n            class=\"avatar-uploader\"\n            action=\"/api/users/avatar\"\n            :show-file-list=\"false\"\n            :on-success=\"updateAvatar\"\n          >\n            <img v-if=\"avatar\" :src=\"avatar\" class=\"avatar\" />\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\" />\n          </el-upload>\n          <el-form\n            label-width=\"70px\"\n            :model=\"infoForm\"\n            style=\"width:320px;margin-left:3rem\"\n          >\n            <el-form-item label=\"昵称\">\n              <el-input v-model=\"infoForm.nickname\" size=\"small\" />\n            </el-form-item>\n            <el-form-item label=\"个人简介\">\n              <el-input v-model=\"infoForm.intro\" size=\"small\" />\n            </el-form-item>\n            <el-form-item label=\"个人网站\">\n              <el-input v-model=\"infoForm.webSite\" size=\"small\" />\n            </el-form-item>\n            <el-button\n              @click=\"updateInfo\"\n              type=\"primary\"\n              size=\"medium\"\n              style=\"margin-left:4.375rem\"\n            >\n              修改\n            </el-button>\n          </el-form>\n        </div>\n      </el-tab-pane>\n      <!-- 修改密码 -->\n      <el-tab-pane label=\"修改密码\" name=\"password\">\n        <el-form label-width=\"70px\" :model=\"passwordForm\" style=\"width:320px\">\n          <el-form-item label=\"旧密码\">\n            <el-input\n              @keyup.enter.native=\"updatePassword\"\n              v-model=\"passwordForm.oldPassword\"\n              size=\"small\"\n              show-password\n            />\n          </el-form-item>\n          <el-form-item label=\"新密码\">\n            <el-input\n              @keyup.enter.native=\"updatePassword\"\n              v-model=\"passwordForm.newPassword\"\n              size=\"small\"\n              show-password\n            />\n          </el-form-item>\n          <el-form-item label=\"确认密码\">\n            <el-input\n              @keyup.enter.native=\"updatePassword\"\n              v-model=\"passwordForm.confirmPassword\"\n              size=\"small\"\n              show-password\n            />\n          </el-form-item>\n          <el-button\n            type=\"primary\"\n            size=\"medium\"\n            style=\"margin-left:4.4rem\"\n            @click=\"updatePassword\"\n          >\n            修改\n          </el-button>\n        </el-form>\n      </el-tab-pane>\n    </el-tabs>\n  </el-card>\n</template>\n\n<script>\nexport default {\n  data: function() {\n    return {\n      infoForm: {\n        nickname: this.$store.state.nickname,\n        intro: this.$store.state.intro,\n        webSite: this.$store.state.webSite\n      },\n      passwordForm: {\n        oldPassword: \"\",\n        newPassword: \"\",\n        confirmPassword: \"\"\n      },\n      activeName: \"info\"\n    };\n  },\n  methods: {\n    handleClick(tab) {\n      if (tab.index == 2 && this.notice == \"\") {\n        this.axios.get(\"/api/admin/notice\").then(({ data }) => {\n          this.notice = data.data;\n        });\n      }\n    },\n    updateAvatar(response) {\n      if (response.flag) {\n        this.$message.success(response.message);\n        this.$store.commit(\"updateAvatar\", response.data);\n      } else {\n        this.$message.error(response.message);\n      }\n    },\n    updateInfo() {\n      if (this.infoForm.nickname.trim() == \"\") {\n        this.$message.error(\"昵称不能为空\");\n        return false;\n      }\n      this.axios.put(\"/api/users/info\", this.infoForm).then(({ data }) => {\n        if (data.flag) {\n          this.$message.success(data.message);\n          this.$store.commit(\"updateUserInfo\", this.infoForm);\n        } else {\n          this.$message.error(data.message);\n        }\n      });\n    },\n    updatePassword() {\n      if (this.passwordForm.oldPassword.trim() == \"\") {\n        this.$message.error(\"旧密码不能为空\");\n        return false;\n      }\n      if (this.passwordForm.newPassword.trim() == \"\") {\n        this.$message.error(\"新密码不能为空\");\n        return false;\n      }\n      if (this.passwordForm.newPassword.length < 6) {\n        this.$message.error(\"新密码不能少于6位\");\n        return false;\n      }\n      if (this.passwordForm.newPassword != this.passwordForm.confirmPassword) {\n        this.$message.error(\"两次密码输入不一致\");\n        return false;\n      }\n      this.axios\n        .put(\"/api/admin/users/password\", this.passwordForm)\n        .then(({ data }) => {\n          if (data.flag) {\n            this.passwordForm.oldPassword = \"\";\n            this.passwordForm.newPassword = \"\";\n            this.passwordForm.confirmPassword = \"\";\n            this.$message.success(data.message);\n          } else {\n            this.$message.error(data.message);\n          }\n        });\n    },\n    updateNotice() {\n      if (this.notice.trim() == \"\") {\n        this.$message.error(\"公告不能为空\");\n        return false;\n      }\n      let param = new URLSearchParams();\n      param.append(\"notice\", this.notice);\n      this.axios.put(\"/api/admin/notice\", param).then(({ data }) => {\n        if (data.flag) {\n          this.$message.success(data.message);\n        } else {\n          this.$message.error(data.message);\n        }\n      });\n    }\n  },\n  computed: {\n    avatar() {\n      return this.$store.state.avatar;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.avatar-container {\n  text-align: center;\n}\n.el-icon-message-solid {\n  color: #f56c6c;\n  margin-right: 0.3rem;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #8c939d;\n  width: 120px;\n  height: 120px;\n  line-height: 120px;\n  text-align: center;\n}\n.avatar {\n  width: 120px;\n  height: 120px;\n  display: block;\n}\n.info-container {\n  display: flex;\n  align-items: center;\n  margin-left: 20%;\n  margin-top: 5rem;\n}\n</style>\n"],"mappings":"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"}]}