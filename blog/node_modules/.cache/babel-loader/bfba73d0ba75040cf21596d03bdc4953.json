{"remainingRequest":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\babel-loader\\lib\\index.js!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\src\\components\\Reply.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\src\\components\\Reply.vue","mtime":1723305235328},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEVtb2ppIGZyb20gIi4vRW1vamkiOwppbXBvcnQgRW1vamlMaXN0IGZyb20gIi4uL2Fzc2V0cy9qcy9lbW9qaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBFbW9qaTogRW1vamkKICB9LAogIHByb3BzOiB7CiAgICB0eXBlOiB7CiAgICAgIHR5cGU6IE51bWJlcgogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGluZGV4OiAwLAogICAgICBjaG9vc2VFbW9qaTogZmFsc2UsCiAgICAgIG5pY2tuYW1lOiAiIiwKICAgICAgcmVwbHlVc2VySWQ6IG51bGwsCiAgICAgIHBhcmVudElkOiBudWxsLAogICAgICBjb21tZW50Q29udGVudDogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBjYW5jbGVSZXBseTogZnVuY3Rpb24gY2FuY2xlUmVwbHkoKSB7CiAgICAgIHRoaXMuJHJlZnMucmVwbHkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgIH0sCiAgICBpbnNlcnRSZXBseTogZnVuY3Rpb24gaW5zZXJ0UmVwbHkoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJZCkgewogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luRmxhZyA9IHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAodGhpcy5jb21tZW50Q29udGVudC50cmltKCkgPT09ICIiKSB7CiAgICAgICAgdGhpcy4kdG9hc3QoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIG1lc3NhZ2U6ICLlm57lpI3kuI3og73kuLrnqboiCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB2YXIgcmVnID0gL1xbLis/XF0vZzsKICAgICAgdGhpcy5jb21tZW50Q29udGVudCA9IHRoaXMuY29tbWVudENvbnRlbnQucmVwbGFjZShyZWcsIGZ1bmN0aW9uIChzdHIpIHsKICAgICAgICByZXR1cm4gIjxpbWcgc3JjPSciICsgRW1vamlMaXN0W3N0cl0gKyAiJyB3aWR0aD0nMjQnIGhlaWdodD0nMjQnIHN0eWxlPSdtYXJnaW46IDAgMXB4OyB2ZXJ0aWNhbC1hbGlnbjogdGV4dC1ib3R0b20nLz4iOwogICAgICB9KTsKICAgICAgdmFyIHBhdGggPSB0aGlzLiRyb3V0ZS5wYXRoOwogICAgICB2YXIgYXJyID0gcGF0aC5zcGxpdCgiLyIpOwogICAgICB2YXIgY29tbWVudCA9IHsKICAgICAgICB0eXBlOiB0aGlzLnR5cGUsCiAgICAgICAgcmVwbHlVc2VySWQ6IHRoaXMucmVwbHlVc2VySWQsCiAgICAgICAgcGFyZW50SWQ6IHRoaXMucGFyZW50SWQsCiAgICAgICAgY29tbWVudENvbnRlbnQ6IHRoaXMuY29tbWVudENvbnRlbnQKICAgICAgfTsKCiAgICAgIGlmICh0aGlzLnR5cGUgPT09IDEgfHwgdGhpcy50eXBlID09PSAzKSB7CiAgICAgICAgY29tbWVudC50b3BpY0lkID0gYXJyWzJdOwogICAgICB9CgogICAgICB0aGlzLmNvbW1lbnRDb250ZW50ID0gIiI7CiAgICAgIHZhciB0b2tlbiA9IHRoaXMuJHN0b3JlLnN0YXRlLnRva2VuIHx8IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogICAgICB0aGlzLmF4aW9zLnBvc3QoIi9hcGkvY29tbWVudHMiLCBjb21tZW50LCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiAiQmVhcmVyICIuY29uY2F0KHRva2VuKQogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgIGNvbnNvbGUubG9nKCJSZXNwb25zZSBmcm9tIHNlcnZlcjoiLCBkYXRhKTsgLy8gRGVidWcgbG9nCgogICAgICAgIGlmIChkYXRhLmRhdGEgJiYgZGF0YS5kYXRhLnJlY29yZExpc3QgJiYgZGF0YS5kYXRhLnJlY29yZExpc3QubGVuZ3RoKSB7CiAgICAgICAgICAvLyDlpoLmnpzmlbDmja7moLzlvI/mraPnoa7vvIzmiafooYwgVUkg5pu05pawCiAgICAgICAgICBfdGhpcy4kZW1pdCgicmVsb2FkUmVwbHkiLCBfdGhpcy5pbmRleCk7CgogICAgICAgICAgX3RoaXMuJHRvYXN0KHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAi5Zue5aSN5oiQ5YqfIgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLiR0b2FzdCh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGRhdGEubWVzc2FnZSB8fCAi5Zue5aSN5o+Q5Lqk5aSx6LSlIgogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBzdWJtaXR0aW5nIHJlcGx5OiIsIGVycm9yKTsgLy8gRGVidWcgbG9nCgogICAgICAgIF90aGlzLiR0b2FzdCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgbWVzc2FnZTogIuWbnuWkjeaPkOS6pOWksei0pe+8jOivt+eojeWQjuWGjeivlSIKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgYWRkRW1vamk6IGZ1bmN0aW9uIGFkZEVtb2ppKHRleHQpIHsKICAgICAgdGhpcy5jb21tZW50Q29udGVudCArPSB0ZXh0OwogICAgfQogIH0KfTs="},{"version":3,"sources":["Reply.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"reply-input-wrapper\" style=\"display: none\" ref=\"reply\">\n    <textarea\n      class=\"comment-textarea\"\n      :placeholder=\"'回复 @' + nickname + '：'\"\n      auto-grow\n      dense\n      v-model=\"commentContent\"\n    />\n    <div class=\"emoji-container\">\n      <span\n        :class=\"chooseEmoji ? 'emoji-btn-active' : 'emoji-btn'\"\n        @click=\"chooseEmoji = !chooseEmoji\"\n      >\n        <i class=\"iconfont iconbiaoqing\" />\n      </span>\n      <div style=\"margin-left:auto\">\n        <button @click=\"cancleReply\" class=\"cancle-btn v-comment-btn\">\n          取消\n        </button>\n        <button @click=\"insertReply\" class=\"upload-btn v-comment-btn\">\n          提交\n        </button>\n      </div>\n    </div>\n    <!-- 表情框 -->\n    <emoji @addEmoji=\"addEmoji\" :chooseEmoji=\"chooseEmoji\" />\n  </div>\n</template>\n\n<script>\nimport Emoji from \"./Emoji\";\nimport EmojiList from \"../assets/js/emoji\";\nexport default {\n  components: {\n    Emoji\n  },\n  props: {\n    type: {\n      type: Number\n    }\n  },\n  data: function() {\n    return {\n      index: 0,\n      chooseEmoji: false,\n      nickname: \"\",\n      replyUserId: null,\n      parentId: null,\n      commentContent: \"\"\n    };\n  },\n  methods: {\n    cancleReply() {\n      this.$refs.reply.style.display = \"none\";\n    },\n    insertReply() {\n      if (!this.$store.state.userId) {\n        this.$store.state.loginFlag = true;\n        return false;\n      }\n\n      if (this.commentContent.trim() === \"\") {\n        this.$toast({ type: \"error\", message: \"回复不能为空\" });\n        return false;\n      }\n\n      const reg = /\\[.+?\\]/g;\n      this.commentContent = this.commentContent.replace(reg, (str) => {\n        return (\n            \"<img src='\" +\n            EmojiList[str] +\n            \"' width='24' height='24' style='margin: 0 1px; vertical-align: text-bottom'/>\"\n        );\n      });\n\n      const path = this.$route.path;\n      const arr = path.split(\"/\");\n      const comment = {\n        type: this.type,\n        replyUserId: this.replyUserId,\n        parentId: this.parentId,\n        commentContent: this.commentContent\n      };\n\n      if (this.type === 1 || this.type === 3) {\n        comment.topicId = arr[2];\n      }\n\n      this.commentContent = \"\";\n      const token = this.$store.state.token || localStorage.getItem('token');\n\n      this.axios.post(\"/api/comments\", comment, {\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }).then(({ data }) => {\n        console.log(\"Response from server:\", data); // Debug log\n\n        if (data.data && data.data.recordList && data.data.recordList.length) {\n          // 如果数据格式正确，执行 UI 更新\n          this.$emit(\"reloadReply\", this.index);\n          this.$toast({ type: \"success\", message: \"回复成功\" });\n        } else {\n          this.$toast({ type: \"error\", message: data.message || \"回复提交失败\" });\n        }\n      }).catch(error => {\n        console.error(\"Error submitting reply:\", error); // Debug log\n        this.$toast({ type: \"error\", message: \"回复提交失败，请稍后再试\" });\n      });\n    }\n\n    ,\n    addEmoji(text) {\n      this.commentContent += text;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.reply-input-wrapper {\n  border: 1px solid #90939950;\n  border-radius: 4px;\n  padding: 10px;\n  margin: 0 0 10px;\n}\n</style>\n"],"sourceRoot":"src/components"}]}