{"remainingRequest":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\babel-loader\\lib\\index.js!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\src\\views\\user\\User.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\src\\views\\user\\User.vue","mtime":1723726486399},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\sourceCode\\Backend\\blog-master\\blog-vue\\blog\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFZ1ZUltYWdlQ3JvcFVwbG9hZCBmcm9tICd2dWUtaW1hZ2UtY3JvcC11cGxvYWQnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgVnVlSW1hZ2VDcm9wVXBsb2FkOiBWdWVJbWFnZUNyb3BVcGxvYWQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VySW5mbzogewogICAgICAgIG5pY2tuYW1lOiB0aGlzLiRzdG9yZS5zdGF0ZS5uaWNrbmFtZSwKICAgICAgICBpbnRybzogdGhpcy4kc3RvcmUuc3RhdGUuaW50cm8sCiAgICAgICAgd2ViU2l0ZTogdGhpcy4kc3RvcmUuc3RhdGUud2ViU2l0ZSwKICAgICAgICBsb2dpblR5cGU6IHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luVHlwZQogICAgICB9LAogICAgICB1cGxvYWRIZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiLmNvbmNhdCh0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkKICAgICAgfSwKICAgICAgdXBsb2FkUGFyYW1zOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUltYWdlVXBkYXRlZDogZnVuY3Rpb24gaGFuZGxlSW1hZ2VVcGRhdGVkKGNyb3BwZWREYXRhVXJsKSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndXBkYXRlQXZhdGFyJywgY3JvcHBlZERhdGFVcmwpOwogICAgfSwKICAgIHVwbG9hZEF2YXRhcjogZnVuY3Rpb24gdXBsb2FkQXZhdGFyKHJlc3BvbnNlKSB7CiAgICAgIGlmIChyZXNwb25zZS5mbGFnKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVBdmF0YXInLCByZXNwb25zZS5kYXRhKTsKICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICBtZXNzYWdlOiAn5LiK5Lyg5oiQ5YqfJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5tZXNzYWdlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGFVc2VySW5mbzogZnVuY3Rpb24gdXBkYXRhVXNlckluZm8oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdG9rZW4gPSB0aGlzLiRzdG9yZS5zdGF0ZS50b2tlbiB8fCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICAgICAgdGhpcy5heGlvcy5wdXQoIi9hcGkvdXNlcnMvaW5mbyIsIHRoaXMudXNlckluZm8sIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQXV0aG9yaXphdGlvbic6ICJCZWFyZXIgIi5jb25jYXQodG9rZW4pCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgICAgdmFyIGRhdGEgPSBfcmVmLmRhdGE7CgogICAgICAgIGlmIChkYXRhLmZsYWcpIHsKICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZVVzZXJJbmZvIiwgX3RoaXMudXNlckluZm8pOwoKICAgICAgICAgIF90aGlzLiR0b2FzdCh7CiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgbWVzc2FnZTogIuS/ruaUueaIkOWKnyIKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kdG9hc3QoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBtZXNzYWdlOiBkYXRhLm1lc3NhZ2UKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgb3BlbkVtYWlsTW9kZWw6IGZ1bmN0aW9uIG9wZW5FbWFpbE1vZGVsKCkgewogICAgICB0aGlzLiRzdG9yZS5zdGF0ZS5lbWFpbEZsYWcgPSB0cnVlOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGVtYWlsOiBmdW5jdGlvbiBlbWFpbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmVtYWlsOwogICAgfSwKICAgIGxvZ2luVHlwZTogZnVuY3Rpb24gbG9naW5UeXBlKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUubG9naW5UeXBlOwogICAgfSwKICAgIGNvdmVyOiBmdW5jdGlvbiBjb3ZlcigpIHsKICAgICAgdmFyIGNvdmVyID0gJyc7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmJsb2dJbmZvLnBhZ2VMaXN0LmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBpZiAoaXRlbS5wYWdlTGFiZWwgPT0gJ3VzZXInKSB7CiAgICAgICAgICBjb3ZlciA9IGl0ZW0ucGFnZUNvdmVyOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiAnYmFja2dyb3VuZDogdXJsKCcgKyBjb3ZlciArICcpIGNlbnRlciBjZW50ZXIgLyBjb3ZlciBuby1yZXBlYXQnOwogICAgfQogIH0KfTs="},{"version":3,"sources":["User.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"banner\" :style=\"cover\">\n      <h1 class=\"banner-title\">个人中心</h1>\n    </div>\n    <v-card class=\"blog-container\">\n      <div>\n        <span class=\"info-title\">基本信息</span>\n      </div>\n      <v-row class=\"info-wrapper\">\n        <v-col md=\"3\" cols=\"12\">\n          <vue-image-crop-upload\n              ref=\"upload\"\n              :field-width=\"200\"\n              :field-height=\"200\"\n              :output-width=\"140\"\n              :output-height=\"140\"\n              output-type=\"jpeg\"\n              @image-updated=\"handleImageUpdated\"\n              @upload-success=\"uploadAvatar\"\n              :params=\"uploadParams\"\n              upload-url=\"/api/users/avatar\"\n              :headers=\"uploadHeaders\"\n              class=\"avatar-uploader\"\n          />\n        </v-col>\n        <v-col md=\"7\" cols=\"12\">\n          <v-text-field\n              v-model=\"userInfo.nickname\"\n              label=\"昵称\"\n              placeholder=\"请输入您的昵称\"\n          />\n          <v-text-field\n              v-model=\"userInfo.webSite\"\n              class=\"mt-7\"\n              label=\"个人网站\"\n              placeholder=\"http://你的网址\"\n          />\n          <v-text-field\n              v-model=\"userInfo.intro\"\n              class=\"mt-7\"\n              label=\"简介\"\n              placeholder=\"介绍下自己吧\"\n          />\n          <div v-if=\"loginType != 0\" class=\"mt-7 binding\">\n            <v-text-field\n                disabled\n                v-model=\"email\"\n                label=\"邮箱号\"\n                placeholder=\"请绑定邮箱\"\n            />\n            <v-btn v-if=\"email\" text small @click=\"openEmailModel\">\n              修改绑定\n            </v-btn>\n            <v-btn v-else text small @click=\"openEmailModel\">\n              绑定邮箱\n            </v-btn>\n          </div>\n          <v-btn @click=\"updataUserInfo\" outlined class=\"mt-5\">修改</v-btn>\n        </v-col>\n      </v-row>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport VueImageCropUpload from 'vue-image-crop-upload';\n\nexport default {\n  components: { VueImageCropUpload },\n  data() {\n    return {\n      userInfo: {\n        nickname: this.$store.state.nickname,\n        intro: this.$store.state.intro,\n        webSite: this.$store.state.webSite,\n        loginType: this.$store.state.loginType,\n      },\n      uploadHeaders: {\n        Authorization: `Bearer ${this.$store.state.token || localStorage.getItem('token')}`,\n      },\n      uploadParams: {},\n    };\n  },\n  methods: {\n    handleImageUpdated(croppedDataUrl) {\n      this.$store.commit('updateAvatar', croppedDataUrl);\n    },\n    uploadAvatar(response) {\n      if (response.flag) {\n        this.$store.commit('updateAvatar', response.data);\n        this.$toast({ type: 'success', message: '上传成功' });\n      } else {\n        this.$toast({ type: 'error', message: response.message });\n      }\n    },\n    updataUserInfo() {\n      const token = this.$store.state.token || localStorage.getItem('token');\n      this.axios.put(\"/api/users/info\", this.userInfo, {\n        headers: {\n          'Authorization': `Bearer ${token}`,\n        },\n      }).then(({ data }) => {\n        if (data.flag) {\n          this.$store.commit(\"updateUserInfo\", this.userInfo);\n          this.$toast({ type: \"success\", message: \"修改成功\" });\n        } else {\n          this.$toast({ type: \"error\", message: data.message });\n        }\n      });\n    },\n    openEmailModel() {\n      this.$store.state.emailFlag = true;\n    },\n  },\n  computed: {\n    email() {\n      return this.$store.state.email;\n    },\n    loginType() {\n      return this.$store.state.loginType;\n    },\n    cover() {\n      var cover = '';\n      this.$store.state.blogInfo.pageList.forEach(item => {\n        if (item.pageLabel == 'user') {\n          cover = item.pageCover;\n        }\n      });\n      return 'background: url(' + cover + ') center center / cover no-repeat';\n    },\n  },\n};\n</script>\n\n<style scoped>\n.info-title {\n  font-size: 1.25rem;\n  font-weight: bold;\n}\n.info-wrapper {\n  margin-top: 1rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.avatar-uploader {\n  width: 140px;\n  height: 140px;\n  cursor: pointer;\n}\n.binding {\n  display: flex;\n  align-items: center;\n}\n</style>\n"],"sourceRoot":"src/views/user"}]}