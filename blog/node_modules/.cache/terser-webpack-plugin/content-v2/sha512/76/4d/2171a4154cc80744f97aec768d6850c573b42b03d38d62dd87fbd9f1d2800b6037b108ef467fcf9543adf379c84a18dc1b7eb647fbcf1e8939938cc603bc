{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-4281d5aa\"],{\"2ebb\":function(t,e,s){},\"4ea3\":function(t,e,s){\"use strict\";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[t._m(0),s(\"div\",{staticClass:\"comment-input-wrapper\"},[s(\"div\",{staticStyle:{display:\"flex\"}},[s(\"v-avatar\",{attrs:{size:\"40\"}},[this.$store.state.avatar?s(\"img\",{attrs:{src:this.$store.state.avatar}}):s(\"img\",{attrs:{src:this.$store.state.blogInfo.websiteConfig.touristAvatar}})]),s(\"div\",{staticClass:\"ml-3\",staticStyle:{width:\"100%\"}},[s(\"div\",{staticClass:\"comment-input\"},[s(\"textarea\",{directives:[{name:\"model\",rawName:\"v-model\",value:t.commentContent,expression:\"commentContent\"}],staticClass:\"comment-textarea\",attrs:{placeholder:\"留下点什么吧...\",\"auto-grow\":\"\",dense:\"\"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}})]),s(\"div\",{staticClass:\"emoji-container\"},[s(\"span\",{class:t.chooseEmoji?\"emoji-btn-active\":\"emoji-btn\",on:{click:function(e){t.chooseEmoji=!t.chooseEmoji}}},[s(\"i\",{staticClass:\"iconfont iconbiaoqing\"})]),s(\"button\",{staticClass:\"upload-btn v-comment-btn\",staticStyle:{\"margin-left\":\"auto\"},on:{click:t.insertComment}},[t._v(\" 提交 \")])]),s(\"emoji\",{attrs:{chooseEmoji:t.chooseEmoji},on:{addEmoji:t.addEmoji}})],1)],1)]),t.count>0&&t.reFresh?s(\"div\",[s(\"div\",{staticClass:\"count\"},[t._v(t._s(t.count)+\" 评论\")]),t._l(t.commentList,(function(e,i){return s(\"div\",{key:e.id,staticClass:\"pt-5\",staticStyle:{display:\"flex\"}},[s(\"v-avatar\",{staticClass:\"comment-avatar\",attrs:{size:\"40\"}},[s(\"img\",{attrs:{src:e.avatar}})]),s(\"div\",{staticClass:\"comment-meta\"},[s(\"div\",{staticClass:\"comment-user\"},[e.webSite?s(\"a\",{attrs:{href:e.webSite,target:\"_blank\"}},[t._v(\" \"+t._s(e.nickname)+\" \")]):s(\"span\",[t._v(t._s(e.nickname))]),1==e.userId?s(\"span\",{staticClass:\"blogger-tag\"},[t._v(\"博主\")]):t._e()]),s(\"div\",{staticClass:\"comment-info\"},[s(\"span\",{staticStyle:{\"margin-right\":\"10px\"}},[t._v(t._s(t.count-i)+\"楼\")]),s(\"span\",{staticStyle:{\"margin-right\":\"10px\"}},[t._v(t._s(t._f(\"date\")(e.createTime)))]),s(\"span\",{class:t.isLike(e.id)+\" iconfont icondianzan\",on:{click:function(s){return t.like(e)}}}),s(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.likeCount>0,expression:\"item.likeCount > 0\"}]},[t._v(\" \"+t._s(e.likeCount))]),s(\"span\",{staticClass:\"reply-btn\",on:{click:function(s){return t.replyComment(i,e)}}},[t._v(\" 回复 \")])]),s(\"p\",{staticClass:\"comment-content\",domProps:{innerHTML:t._s(e.commentContent)}}),t._l(e.replyDTOList,(function(n){return s(\"div\",{key:n.id,staticStyle:{display:\"flex\"}},[s(\"v-avatar\",{staticClass:\"comment-avatar\",attrs:{size:\"36\"}},[s(\"img\",{attrs:{src:n.avatar}})]),s(\"div\",{staticClass:\"reply-meta\"},[s(\"div\",{staticClass:\"comment-user\"},[n.webSite?s(\"a\",{attrs:{href:n.webSite,target:\"_blank\"}},[t._v(\" \"+t._s(n.nickname)+\" \")]):s(\"span\",[t._v(t._s(n.nickname))]),1==n.userId?s(\"span\",{staticClass:\"blogger-tag\"},[t._v(\"博主\")]):t._e()]),s(\"div\",{staticClass:\"comment-info\"},[s(\"span\",{staticStyle:{\"margin-right\":\"10px\"}},[t._v(\" \"+t._s(t._f(\"date\")(n.createTime))+\" \")]),s(\"span\",{class:t.isLike(n.id)+\" iconfont icondianzan\",on:{click:function(e){return t.like(n)}}}),s(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:n.likeCount>0,expression:\"reply.likeCount > 0\"}]},[t._v(\" \"+t._s(n.likeCount))]),s(\"span\",{staticClass:\"reply-btn\",on:{click:function(e){return t.replyComment(i,n)}}},[t._v(\" 回复 \")])]),s(\"p\",{staticClass:\"comment-content\"},[n.replyUserId!=e.userId?[n.replyWebSite?s(\"a\",{staticClass:\"comment-nickname ml-1\",attrs:{href:n.replyWebSite,target:\"_blank\"}},[t._v(\" @\"+t._s(n.replyNickname)+\" \")]):s(\"span\",{staticClass:\"ml-1\"},[t._v(\" @\"+t._s(n.replyNickname)+\" \")]),t._v(\" ， \")]:t._e(),s(\"span\",{domProps:{innerHTML:t._s(n.commentContent)}})],2)])],1)})),s(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.replyCount>3,expression:\"item.replyCount > 3\"}],ref:\"check\",refInFor:!0,staticClass:\"mb-3\",staticStyle:{\"font-size\":\"0.75rem\",color:\"#6d757a\"}},[t._v(\" 共 \"),s(\"b\",[t._v(t._s(e.replyCount))]),t._v(\" 条回复， \"),s(\"span\",{staticStyle:{color:\"#00a1d6\",cursor:\"pointer\"},on:{click:function(s){return t.checkReplies(i,e)}}},[t._v(\" 点击查看 \")])]),s(\"div\",{ref:\"paging\",refInFor:!0,staticClass:\"mb-3\",staticStyle:{\"font-size\":\"0.75rem\",color:\"#222\",display:\"none\"}},[s(\"span\",{staticStyle:{\"padding-right\":\"10px\"}},[t._v(\" 共\"+t._s(Math.ceil(e.replyCount/5))+\"页 \")]),s(\"paging\",{ref:\"page\",refInFor:!0,attrs:{totalPage:Math.ceil(e.replyCount/5),index:i,commentId:e.id},on:{changeReplyCurrent:t.changeReplyCurrent}})],1),s(\"Reply\",{ref:\"reply\",refInFor:!0,attrs:{type:t.type},on:{reloadReply:t.reloadReply}})],2)],1)})),s(\"div\",{staticClass:\"load-wrapper\"},[t.count>t.commentList.length?s(\"v-btn\",{attrs:{outlined:\"\"},on:{click:t.listComments}},[t._v(\" 加载更多... \")]):t._e()],1)],2):s(\"div\",{staticStyle:{padding:\"1.25rem\",\"text-align\":\"center\"}},[t._v(\" 来发评论吧~ \")])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",{staticClass:\"comment-title\"},[s(\"i\",{staticClass:\"iconfont iconpinglunzu\"}),t._v(\"评论\")])}],a=(s(\"4160\"),s(\"c975\"),s(\"a9e3\"),s(\"ac1f\"),s(\"5319\"),s(\"1276\"),s(\"498a\"),s(\"159b\"),s(\"2909\")),o=s(\"2f3e\"),r=s(\"bbe0\"),c=s(\"bbe3\"),l=s(\"f568\"),m={components:{Reply:o[\"a\"],Emoji:c[\"a\"],Paging:r[\"a\"]},props:{type:{type:Number}},created:function(){this.listComments()},data:function(){return{reFresh:!0,commentContent:\"\",chooseEmoji:!1,current:1,commentList:[],count:0}},methods:{replyComment:function(t,e){this.$refs.reply.forEach((function(t){t.$el.style.display=\"none\"})),this.$refs.reply[t].commentContent=\"\",this.$refs.reply[t].nickname=e.nickname,this.$refs.reply[t].replyUserId=e.userId,this.$refs.reply[t].parentId=this.commentList[t].id,this.$refs.reply[t].chooseEmoji=!1,this.$refs.reply[t].index=t,this.$refs.reply[t].$el.style.display=\"block\"},addEmoji:function(t){this.commentContent+=t},checkReplies:function(t,e){var s=this;this.axios.get(\"/api/comments/\"+e.id+\"/replies\",{params:{current:1,size:5}}).then((function(i){var n=i.data;s.$refs.check[t].style.display=\"none\",e.replyDTOList=n.data,Math.ceil(e.replyCount/5)>1&&(s.$refs.paging[t].style.display=\"flex\")}))},changeReplyCurrent:function(t,e,s){var i=this;this.axios.get(\"/api/comments/\"+s+\"/replies\",{params:{current:t,size:5}}).then((function(t){var s=t.data;i.commentList[e].replyDTOList=s.data}))},listComments:function(){var t=this,e=this.$route.path,s=e.split(\"/\"),i={current:this.current,type:this.type};switch(this.type){case 1:case 3:i.topicId=s[2];break;default:break}this.axios.get(\"/api/comments\",{params:i}).then((function(e){var s,i=e.data;1==t.current?t.commentList=i.data.recordList:(s=t.commentList).push.apply(s,Object(a[\"a\"])(i.data.recordList));t.current++,t.count=i.data.count,t.$emit(\"getCommentCount\",t.count)}))},insertComment:function(){var t=this;if(!this.$store.state.userId)return this.$store.state.loginFlag=!0,!1;if(\"\"==this.commentContent.trim())return this.$toast({type:\"error\",message:\"评论不能为空\"}),!1;var e=/\\[.+?\\]/g;this.commentContent=this.commentContent.replace(e,(function(t){return\"<img src= '\"+l[\"a\"][t]+\"' width='24'height='24' style='margin: 0 1px;vertical-align: text-bottom'/>\"}));var s=this.$route.path,i=s.split(\"/\"),n={commentContent:this.commentContent,type:this.type};switch(this.type){case 1:case 3:n.topicId=i[2];break;default:break}this.commentContent=\"\",this.axios.post(\"/api/comments\",n).then((function(e){var s=e.data;if(s.flag){t.current=1,t.listComments();var i=t.$store.state.blogInfo.websiteConfig.isCommentReview;i?t.$toast({type:\"warnning\",message:\"评论成功，正在审核中\"}):t.$toast({type:\"success\",message:\"评论成功\"})}else t.$toast({type:\"error\",message:s.message})}))},like:function(t){var e=this;if(!this.$store.state.userId)return this.$store.state.loginFlag=!0,!1;this.axios.post(\"/api/comments/\"+t.id+\"/like\").then((function(s){var i=s.data;i.flag&&(-1!=e.$store.state.commentLikeSet.indexOf(t.id)?e.$set(t,\"likeCount\",t.likeCount-1):e.$set(t,\"likeCount\",t.likeCount+1),e.$store.commit(\"commentLike\",t.id))}))},reloadReply:function(t){var e=this;this.axios.get(\"/api/comments/\"+this.commentList[t].id+\"/replies\",{params:{current:this.$refs.page[t].current,size:5}}).then((function(s){var i=s.data;e.commentList[t].replyCount++,e.commentList[t].replyCount>5&&(e.$refs.paging[t].style.display=\"flex\"),e.$refs.check[t].style.display=\"none\",e.$refs.reply[t].$el.style.display=\"none\",e.commentList[t].replyDTOList=i.data}))}},computed:{isLike:function(){return function(t){var e=this.$store.state.commentLikeSet;return-1!=e.indexOf(t)?\"like-active\":\"like\"}}},watch:{commentList:function(){var t=this;this.reFresh=!1,this.$nextTick((function(){t.reFresh=!0}))}}},p=m,u=(s(\"d69f\"),s(\"2877\")),d=s(\"6544\"),v=s.n(d),f=s(\"8212\"),h=s(\"8336\"),C=Object(u[\"a\"])(p,i,n,!1,null,\"65e82974\",null);e[\"a\"]=C.exports;v()(C,{VAvatar:f[\"a\"],VBtn:h[\"a\"]})},c172:function(t,e,s){\"use strict\";var i=s(\"f14c\"),n=s.n(i);n.a},d536:function(t,e,s){\"use strict\";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s(\"div\",[s(\"div\",{staticClass:\"banner\",style:t.cover},[s(\"h1\",{staticClass:\"banner-title\"},[t._v(\"友情链接\")])]),s(\"v-card\",{staticClass:\"blog-container\"},[s(\"div\",{staticClass:\"link-title mb-1\"},[s(\"v-icon\",{attrs:{color:\"blue\"}},[t._v(\"mdi-link-variant\")]),t._v(\" 大佬链接 \")],1),s(\"v-row\",{staticClass:\"link-container\"},t._l(t.friendLinkList,(function(e){return s(\"v-col\",{key:e.id,staticClass:\"link-wrapper\",attrs:{md:\"4\",cols:\"12\"}},[s(\"a\",{attrs:{href:e.linkAddress,target:\"_blank\"}},[s(\"v-avatar\",{staticClass:\"link-avatar\",attrs:{size:\"65\"}},[s(\"img\",{attrs:{src:e.linkAvatar}})]),s(\"div\",{staticStyle:{width:\"100%\",\"z-index\":\"10\"}},[s(\"div\",{staticClass:\"link-name\"},[t._v(t._s(e.linkName))]),s(\"div\",{staticClass:\"link-intro\"},[t._v(t._s(e.linkIntro))])])],1)])})),1),s(\"div\",{staticClass:\"link-title mt-4 mb-4\"},[s(\"v-icon\",{attrs:{color:\"blue\"}},[t._v(\"mdi-dots-horizontal-circle\")]),t._v(\" 添加友链 \")],1),s(\"blockquote\",[s(\"div\",[t._v(\"名称：\"+t._s(t.blogInfo.websiteConfig.websiteName))]),s(\"div\",[t._v(\"简介：\"+t._s(t.blogInfo.websiteConfig.websiteIntro))]),s(\"div\",[t._v(\"头像：\"+t._s(t.blogInfo.websiteConfig.websiteAvatar))])]),s(\"div\",{staticClass:\"mt-5 mb-5\"},[t._v(\" 需要交换友链的可在下方留言💖 \")]),s(\"blockquote\",{staticClass:\"mb-10\"},[t._v(\" 友链信息展示需要，你的信息格式要包含：名称、介绍、链接、头像 \")]),s(\"Comment\",{attrs:{type:this.commentType}})],1)],1)},n=[],a=(s(\"4160\"),s(\"159b\"),s(\"4ea3\")),o={components:{Comment:a[\"a\"]},created:function(){this.listFriendLink()},data:function(){return{friendLinkList:[],commentType:2}},methods:{listFriendLink:function(){var t=this;this.axios.get(\"/api/links\").then((function(e){var s=e.data;t.friendLinkList=s.data}))}},computed:{blogInfo:function(){return this.$store.state.blogInfo},cover:function(){var t=\"\";return this.$store.state.blogInfo.pageList.forEach((function(e){\"link\"==e.pageLabel&&(t=e.pageCover)})),\"background: url(\"+t+\") center center / cover no-repeat\"}}},r=o,c=(s(\"c172\"),s(\"2877\")),l=s(\"6544\"),m=s.n(l),p=s(\"8212\"),u=s(\"b0af\"),d=s(\"62ad\"),v=s(\"132d\"),f=s(\"0fd9\"),h=Object(c[\"a\"])(r,i,n,!1,null,\"6688ea2e\",null);e[\"default\"]=h.exports;m()(h,{VAvatar:p[\"a\"],VCard:u[\"a\"],VCol:d[\"a\"],VIcon:v[\"a\"],VRow:f[\"a\"]})},d69f:function(t,e,s){\"use strict\";var i=s(\"2ebb\"),n=s.n(i);n.a},f14c:function(t,e,s){}}]);","extractedComments":[]}